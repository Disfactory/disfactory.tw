(function(t){function e(e){for(var o,n,s=e[0],l=e[1],c=e[2],p=0,u=[];p<s.length;p++)n=s[p],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},i={app:0},r=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"0751":function(t,e,a){"use strict";var o=a("48f3"),i=a.n(o);i.a},"0b63":function(t,e,a){"use strict";var o=a("5080"),i=a.n(o);i.a},"1bed":function(t,e,a){"use strict";var o=a("2575"),i=a.n(o);i.a},"1d1b":function(t,e,a){},2575:function(t,e,a){},"31aa":function(t,e,a){},"38e9":function(t,e,a){"use strict";var o=a("786d"),i=a.n(o);i.a},"42d1":function(t,e,a){},"48f0":function(t,e,a){},"48f3":function(t,e,a){},"4af8":function(t,e,a){"use strict";var o=a("4c77"),i=a.n(o);i.a},"4c77":function(t,e,a){},"4ce5":function(t,e,a){"use strict";var o=a("f1cf"),i=a.n(o);i.a},5080:function(t,e,a){},5679:function(t,e,a){"use strict";var o=a("1d1b"),i=a.n(o);i.a},"5c0b":function(t,e,a){"use strict";var o=a("9c0c"),i=a.n(o);i.a},7082:function(t,e,a){"use strict";var o=a("a8e3"),i=a.n(o);i.a},"786d":function(t,e,a){},8271:function(t,e,a){},"8b6e":function(t,e,a){},"9769d":function(t,e,a){"use strict";var o=a("48f0"),i=a.n(o);i.a},"979a":function(t,e,a){"use strict";var o=a("8b6e"),i=a.n(o);i.a},"9c0c":function(t,e,a){},"9e22":function(t,e,a){"use strict";var o=a("f3de"),i=a.n(o);i.a},"9fd7":function(t,e,a){},a18b:function(t,e,a){},a8e3:function(t,e,a){},ab82:function(t,e,a){"use strict";var o=a("e556"),i=a.n(o);i.a},b4fe:function(t,e,a){"use strict";var o=a("a18b"),i=a.n(o);i.a},bf51:function(t,e,a){"use strict";var o=a("9fd7"),i=a.n(o);i.a},c276:function(t,e,a){},c5d3:function(t,e,a){"use strict";var o=a("d10d"),i=a.n(o);i.a},cd49:function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{directives:[{name:"show",rawName:"v-show",value:t.appState.isInitialState||t.appState.isEditFactoryMode&&t.$vuetify.breakpoint.mdAndUp,expression:"appState.isInitialState || (appState.isEditFactoryMode && $vuetify.breakpoint.mdAndUp)"}],attrs:{app:"",color:"primary",dark:"","clipped-right":""}},[a("v-btn",{staticClass:"d-sm-none",staticStyle:{visibility:"hidden"},attrs:{icon:""}},[a("v-icon",[t._v("mdi-temp")])],1),a("v-spacer",{staticClass:"d-sm-none"}),a("v-toolbar-title",[t._v("農地工廠回報")]),a("v-spacer"),a("div",{staticClass:"d-none d-sm-flex"},[a("v-btn",{attrs:{text:""},on:{click:t.modalActions.openTutorialModal}},[t._v(" 使用教學 ")]),a("v-btn",{attrs:{text:""},on:{click:t.modalActions.openSafetyModal}},[t._v(" 安全須知 ")]),a("v-btn",{attrs:{text:""},on:{click:t.modalActions.openContactModal}},[t._v(" 聯絡我們 ")]),a("v-btn",{attrs:{text:"",href:"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240"}},[t._v(" 常見問題 ")]),a("v-btn",{attrs:{text:"",href:"https://about.disfactory.tw",target:"_blank"}},[t._v(" 關於回報系統 ")]),a("v-btn",{attrs:{text:"",href:"https://airtable.com/shrUraKakZRpH52DO",target:"_blank"}},[t._v(" 問題回報 ")])],1),a("v-app-bar-nav-icon",{staticClass:"d-flex d-sm-none",on:{click:function(e){t.drawer=!t.drawer}}})],1),a("v-navigation-drawer",{staticClass:"app-sidebar",attrs:{app:"",right:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{attrs:{"active-class":"deep-purple--text text--accent-4"}},[a("v-list-item",{on:{click:t.modalActions.openTutorialModal}},[a("v-list-item-title",[t._v("使用教學")])],1),a("v-list-item",{on:{click:t.modalActions.openSafetyModal}},[a("v-list-item-title",[t._v("安全須知")])],1),a("v-list-item",{on:{click:t.modalActions.openContactModal}},[a("v-list-item-title",[t._v("聯絡我們")])],1),a("v-list-item",{attrs:{href:"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240",target:"_blank"}},[a("v-list-item-title",[t._v("常見問題")])],1),a("v-list-item",{attrs:{href:"https://about.disfactory.tw",target:"_blank"}},[a("v-list-item-title",[t._v("關於回報系統")])],1),a("v-list-item",{attrs:{href:"https://airtable.com/shrUraKakZRpH52DO",target:"_blank"}},[a("v-list-item-title",[t._v("問題回報")])],1)],1)],1)],1),a("v-main",{staticStyle:{"max-height":"100%",height:"100%"}},[a("app-alert",{attrs:{alert:t.alertState.alert,dismiss:t.alertActions.dismissAlert}}),a("v-dialog",{attrs:{"max-width":"305"},model:{value:t.modalState.createFactorySuccessModal,callback:function(e){t.$set(t.modalState,"createFactorySuccessModal",e)},expression:"modalState.createFactorySuccessModal"}},[a("v-card",{staticClass:"text-center pt-5"},[a("v-icon",{staticStyle:{"font-size":"80px"},attrs:{color:"primary"}},[t._v(" mdi-checkbox-marked-circle ")]),a("v-card-title",{staticClass:"secondary--text justify-center"},[t._v(" 新增可疑工廠成功 ")]),a("v-card-text",[a("small",[t._v(" 3 秒後自動關閉提示訊息 ")])])],1)],1),a("v-dialog",{attrs:{"max-width":"305"},model:{value:t.modalState.updateFactoryImageSuccessModal,callback:function(e){t.$set(t.modalState,"updateFactoryImageSuccessModal",e)},expression:"modalState.updateFactoryImageSuccessModal"}},[a("v-card",{staticClass:"text-center pt-5"},[a("v-icon",{staticStyle:{"font-size":"80px"},attrs:{color:"primary"}},[t._v(" mdi-checkbox-marked-circle ")]),a("v-card-title",{staticClass:"secondary--text justify-center"},[t._v(" 補充工廠照片成功 ")]),a("v-card-text",[a("small",[t._v(" 3 秒後自動關閉提示訊息 ")])])],1)],1),a("v-dialog",{attrs:{"max-width":"305"},model:{value:t.modalState.updateFactorySuccessModal,callback:function(e){t.$set(t.modalState,"updateFactorySuccessModal",e)},expression:"modalState.updateFactorySuccessModal"}},[a("v-card",{staticClass:"text-center pt-5"},[a("v-icon",{staticStyle:{"font-size":"80px"},attrs:{color:"primary"}},[t._v(" mdi-checkbox-marked-circle ")]),a("v-card-title",{staticClass:"secondary--text justify-center"},[t._v(" 補充工廠資訊成功 ")]),a("v-card-text",[a("small",[t._v(" 3 秒後自動關閉提示訊息 ")])])],1)],1),a("about-modal",{attrs:{open:t.modalState.aboutModalOpen,dismiss:t.modalActions.closeAboutModal}}),a("contact-modal",{attrs:{open:t.modalState.contactModalOpen,dismiss:t.modalActions.closeContactModal}}),a("getting-started-modal",{attrs:{open:t.modalState.gettingStartedModalOpen,dismiss:t.modalActions.closeGettingStartedModal}}),a("safety-modal",{model:{value:t.modalState.safetyModalOpen,callback:function(e){t.$set(t.modalState,"safetyModalOpen",e)},expression:"modalState.safetyModalOpen"}}),a("tutorial-modal",{attrs:{open:t.modalState.tutorialModalOpen,dismiss:t.modalActions.closeTutorialModal}}),a("ios-version-modal",{attrs:{open:t.modalState.supportIOSVersionModalOpen,dismiss:t.modalActions.closesupportIOSVersionModal}}),a("Map",{attrs:{setFactoryLocation:t.appActions.setFactoryLocation}}),t.appState.isCreateMode?a("create-factory-steps"):t._e(),t.appState.isEditMode?a("update-factory-steps"):t._e()],1),a("factory-detail-page")],1)},r=[],n=(a("e260"),a("ddb0"),a("750b")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-container"},[a("div",{ref:"root",staticClass:"map"}),t.appState.isInitialPage?a("div",{staticClass:"container-fluid px-1 pt-7 pb-4 filter-buttons-container",class:{desktop:t.$vuetify.breakpoint.mdAndUp,"sidebar-expanded":t.appState.factoryDetailsExpanded}},[a("display-setting-bottom-sheet"),t._l(t.filterButtonsData,(function(e){return a("v-btn",{key:e.value,staticClass:"mx-2 mb-5 primary--text",class:{"inactive-filter":!t.checkActive(e.value)},attrs:{rounded:"",color:"white",name:e.text},on:{click:function(a){return t.onClickFilterButton(e.value)}}},[a("v-icon",{attrs:{color:e.color}},[t._v("mdi-map-marker")]),t._v(" "+t._s(e.text)+" ")],1)}))],2):t._e(),a("div",{staticClass:"ol-fit-location ol-unselectable ol-control",attrs:{"data-label":"map-locate"},on:{click:t.zoomToGeolocation}},[t._m(0)]),t.appState.selectFactoryMode?a("div",{staticClass:"center-point"}):t._e(),t.appState.selectFactoryMode?t._e():a("div",{staticClass:"factory-button-group flex justify-center mb-5 mb-8-md"},[a("v-btn",{attrs:{color:"primary",rounded:"",large:""},on:{click:t.onClickCreateFactoryButton}},[t._v(" 我想新增可疑工廠 ")])],1)])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{attrs:{title:"定位"}},[a("img",{attrs:{src:"/images/locate.svg",alt:"locate"}})])}],c=(a("2532"),a("9ab4")),d=a("f7fe"),p=a.n(d),u=function(){var t,e=this,a=e.$createElement,o=e._self._c||a;return o("button",{class:Object.assign({},{outline:e.outline,disabled:e.disabled,rect:e.rect,small:e.small,auto:e.auto},(t={},t[e.color]=!0,t)),on:{click:e.click}},[e._t("default")],2)},m=[],v=Object(n["b"])({name:"AppButton",props:{outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rect:{type:Boolean,default:!1},color:{type:String,default:"default"},small:{type:Boolean,default:!1},auto:{type:Boolean,default:!1}},setup(t,e){var a=()=>{t.disabled||e.emit("click")};return{click:a}}}),f=v,y=(a("bf51"),a("2877")),g=Object(y["a"])(f,u,m,!1,null,"a2769d84",null),b=g.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{class:{dark:t.dark,fixed:t.fixed,hide:t.hide}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.dark,expression:"!dark"}],staticClass:"back-button",attrs:{"data-label":"navbar-back"},on:{click:function(e){return t.onBackClick()}}},[a("span"),a("span"),a("span")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dark,expression:"dark"}],staticClass:"back-placeholder"}),t._t("default"),a("div",{staticClass:"menu-button",attrs:{"data-label":"navbar-menu"},on:{click:function(e){return t.onMenuClick()}}},[a("span"),a("span"),a("span")])],2)},_=[],x=Object(n["b"])({name:"AppNavbar",props:{dark:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},back:{type:Function},hide:{type:Boolean,default:!1}},setup(t,e){var{emit:a}=e;return{onBackClick(){a("back")},onMenuClick(){a("menu")}}}}),w=x,S=(a("ab82"),Object(y["a"])(w,h,_,!1,null,"f5670a18",null)),C=S.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"checkbox"===t.type?a("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:{small:t.small},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.inputValue)?t._i(t.inputValue,null)>-1:t.inputValue},on:{change:function(e){var a=t.inputValue,o=e.target,i=!!o.checked;if(Array.isArray(a)){var r=null,n=t._i(a,r);o.checked?n<0&&(t.inputValue=a.concat([r])):n>-1&&(t.inputValue=a.slice(0,n).concat(a.slice(n+1)))}else t.inputValue=i}}},"input",t.$attrs,!1)):"radio"===t.type?a("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:{small:t.small},attrs:{type:"radio"},domProps:{checked:t._q(t.inputValue,null)},on:{change:function(e){t.inputValue=null}}},"input",t.$attrs,!1)):a("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:{small:t.small},attrs:{type:t.type},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}},"input",t.$attrs,!1))},k=[],F=Object(n["b"])({name:"AppTextField",props:{type:{type:String,default:"text"},value:{type:String,required:!0},small:{type:Boolean,default:!1}},setup(t,e){var a=Object(n["a"])({get:()=>t.value,set:t=>e.emit("input",t)});return{inputValue:a}}}),j=F,I=(a("e405"),Object(y["a"])(j,O,k,!1,null,"e9035d54",null)),M=I.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t.$vuetify.breakpoint.mdAndUp?a("v-menu",{attrs:{"content-class":"display-setting-popover","close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mx-2 mb-5 white--text",attrs:{color:"primary"}},"v-btn",i,!1),o),[t._v(" 顯示設定 ")])]}}],null,!1,3665771213),model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[a("v-card",[a("v-list",[a("v-list-item",[a("h2",{staticClass:"primary--text text-button"},[t._v("農地範圍 •")]),a("v-btn",{staticClass:"primary--text",class:t.isLUIMapVisable?"font-weight-light":"font-weight-bold",attrs:{text:"","x-small":""},on:{click:function(e){t.isLUIMapVisable=!1}}},[t._v("隱藏")]),a("v-btn",{staticClass:"primary--text",class:t.isLUIMapVisable?"font-weight-bold":"font-weight-light",attrs:{text:"","x-small":""},on:{click:function(e){t.isLUIMapVisable=!0}}},[t._v("顯示")])],1),a("v-list-item",[a("switch-map-mode-button",{attrs:{isInSheet:!0}})],1)],1)],1)],1):a("v-bottom-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mx-2 mb-5 white--text",attrs:{color:"primary"}},"v-btn",i,!1),o),[t._v(" 顯示設定 ")])]}}]),model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[a("v-list",[a("v-subheader",[t._v("地圖顯示設定")]),a("v-list-item",[a("h2",{staticClass:"primary--text text-button"},[t._v("農地範圍 •")]),a("v-btn",{staticClass:"primary--text",class:t.isLUIMapVisable?"font-weight-light":"font-weight-bold",attrs:{text:"","x-small":""},on:{click:function(e){t.isLUIMapVisable=!1}}},[t._v("隱藏")]),a("v-btn",{staticClass:"primary--text",class:t.isLUIMapVisable?"font-weight-bold":"font-weight-light",attrs:{text:"","x-small":""},on:{click:function(e){t.isLUIMapVisable=!0}}},[t._v("顯示")])],1),a("v-list-item",[a("switch-map-mode-button",{attrs:{isInSheet:!0}})],1)],1)],1)],1)},E=[],T=(a("e01a"),Symbol("MAIN_MAP_CONTROLLER")),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-bottom-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"primary--text",class:t.isInSheet?"pa-0":null,attrs:{rounded:!t.isInSheet,text:t.isInSheet,color:"white"}},"v-btn",i,!1),o),[t._v(" 切換地圖模式 • "+t._s(t.currentMapModeName)+" ")])]}}]),model:{value:t.mapModeBottomSheet,callback:function(e){t.mapModeBottomSheet=e},expression:"mapModeBottomSheet"}},[a("v-list",[a("v-subheader",[t._v("切換地圖模式")]),t._l(t.mapModes,(function(e){return a("v-list-item",{key:e.type,on:{click:function(a){t.currentMapMode=e.type}}},[a("v-list-item-title",{staticClass:"primary--text"},[t._v(t._s(e.name))])],1)}))],2)],1)},D=[],V=(a("e6cf"),a("25f0"),a("4cdf")),U=a("a2c7"),P=a("5eee"),B=a("6c77"),z=a("6cbf"),R=a("ce2c"),N=a("83a6"),G=a("8682"),$=a("8295"),Y=a("82b0"),H=a("f403"),Z=a("d510"),J=a("6ed8"),q=a("256f"),W=a("0af5"),K=a("3e6b"),X=a("480c"),Q=a("5831"),tt=a("55bd"),et=a("d0e9"),at=a("e29f"),ot=a("9d47"),it=a("a7f7"),rt=a("076a"),nt=a("f53f"),st=a("3a39"),lt=a("508e"),ct=[{value:"2-1",text:"金屬: 沖床、銑床、車床、鏜孔"},{value:"2-2",text:"金屬: 焊接、鑄造、熱處理"},{value:"2-3",text:"金屬: 金屬表面處理、噴漆"},{value:"3",text:"塑膠加工、射出"},{value:"4",text:"橡膠加工"},{value:"5",text:"非金屬礦物（石材）"},{value:"6",text:"食品"},{value:"7",text:"皮革"},{value:"8",text:"紡織"},{value:"9",text:"其他"}],dt=["default",0,1,2,3],pt=[{type:"default",name:"未處理",documentDisplayStatuses:["疑似工廠"],color:"#A22A29"},{type:0,name:"處理中",documentDisplayStatuses:["已檢舉","已排程稽查","陳述意見期","已勒令停工"],color:"#457287"},{type:1,name:"已斷電",documentDisplayStatuses:["已發函斷電","已排程拆除"],color:"#364516"},{type:2,name:"已拆除",documentDisplayStatuses:["已拆除"],color:"#A1A1A1"},{type:3,name:"無法處理",documentDisplayStatuses:["等待新事證"],color:"#E0E0E0"}],ut=pt.reduce((t,e)=>{return Object.assign(Object.assign({},t),{[e.type]:e})},{}),mt=t=>{return ut[t].name},vt=t=>{return ut[t].color},ft=window.OffscreenCanvas?new OffscreenCanvas(500,500):document.createElement("canvas"),yt=ft.getContext("2d"),gt=t=>e=>{return new Promise(a=>{var o=new Image;o.crossOrigin="",o.src=e,o.style.display="none",o.onload=()=>Object(c["a"])(void 0,void 0,void 0,(function*(){ft.width=o.width,ft.height=o.height,yt.clearRect(0,0,ft.width,ft.height),yt.drawImage(o,0,0);var e=yt.getImageData(0,0,o.width,o.height),{data:i}=e;yield Promise.resolve(t(i));var r=document.createElement("canvas"),n=r.getContext("2d");r.width=o.width,r.height=o.height,n.putImageData(e,0,0),a(r.toDataURL()),o.remove(),r.remove()}))})},bt=(gt(t=>{for(var e=0;e<t.length;e+=4){var a=(t[e]+t[e+1]+t[e+2])/3;t[e]=a,t[e+1]=a,t[e+2]=a}}),[[255,241,0]]),ht=(t,e)=>!t.some((t,a)=>e[a]!==t),_t=t=>bt.some(e=>ht(e,t)),xt=gt(t=>{for(var e=0;e<t.length;e+=4){var a=Array.from(t.slice(e,e+3));_t(a)?(t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=1):(t[e]=0,t[e+1]=0,t[e+2]=0,t[e+3]=255)}}),wt=a("d202"),St=a("97e6"),Ct=a("78db2"),Ot=a("fdb7"),kt=a("0adb"),Ft=a("7f31"),jt={version:8,name:"Light",sources:{protomaps:{type:"vector",tiles:["https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf"],minzoom:0,maxzoom:14,attribution:'<a href="https://protomaps.com" target="_blank">Protomaps</a> © <a href="https://www.openstreetmap.org" target="_blank"> OpenStreetMap</a>'}},layers:[{id:"background",type:"background",paint:{"background-color":"#dddddd"}},{id:"earth",type:"fill",source:"protomaps","source-layer":"earth",paint:{"fill-color":" #e7f1ee"}},{id:"landuse_park",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","park"],["==","landuse","cemetery"]],paint:{"fill-color":"#c2f7d1"}},{id:"landuse_hospital",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","hospital"]],paint:{"fill-color":"#ffeae8"}},{id:"landuse_industrial",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","industrial"]],paint:{"fill-color":"#f8ffed"}},{id:"landuse_school",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","pmap:kind","school"]],paint:{"fill-color":"#f2fef9"}},{id:"natural_wood",type:"fill",source:"protomaps","source-layer":"natural",filter:["any",["==","natural","wood"],["==","leisure","nature_reserve"],["==","landuse","forest"]],paint:{"fill-color":"#eafbe9"}},{id:"landuse_pedestrian",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","highway","footway"]],paint:{"fill-color":"#eef0f0"}},{id:"natural_scrub",type:"fill",source:"protomaps","source-layer":"natural",filter:["in","natural","scrub","grassland"],paint:{"fill-color":"rgb(219,239,209)"}},{id:"natural_glacier",type:"fill",source:"protomaps","source-layer":"natural",filter:["==","natural","glacier"],paint:{"fill-color":"white"}},{id:"natural_sand",type:"fill",source:"protomaps","source-layer":"natural",filter:["==","natural","sand"],paint:{"fill-color":"#eff5e7"}},{id:"landuse_aerodrome",type:"fill",source:"protomaps","source-layer":"landuse",filter:["==","aeroway","aerodrome"],paint:{"fill-color":"#dbe7e7"}},{id:"transit_runway",type:"line",source:"protomaps","source-layer":"transit",filter:["has","aeroway"],paint:{"line-color":"#d1d9d9","line-width":6}},{id:"landuse_runway",type:"fill",source:"protomaps","source-layer":"landuse",filter:["any",["==","aeroway","runway"],["==","area:aeroway","runway"],["==","area:aeroway","taxiway"]],paint:{"fill-color":"#d1d9d9"}},{id:"water",type:"fill",source:"protomaps","source-layer":"water",paint:{"fill-color":"#a4cae1"}},{id:"roads_tunnels_other_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":"#ffffff","line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_tunnels_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":"#f7f7f7","line-dasharray":[1,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_tunnels_minor_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#e2e2e2","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#ebebeb","line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_tunnels_medium_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#e1e1e1","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]}},{id:"roads_tunnels_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#ebebeb","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_tunnels_major_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e3cfd3","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_tunnels_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#ebebeb","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_tunnels_highway_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":"#ebcea2","line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]}},{id:"roads_tunnels_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["<","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":"#ebebeb","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"physical_line_waterway",type:"line",source:"protomaps","source-layer":"physical_line",filter:["==",["get","pmap:kind"],"waterway"],paint:{"line-color":"#a4cae1","line-width":.5}},{id:"buildings",type:"fill-extrusion",source:"protomaps","source-layer":"buildings",paint:{"fill-extrusion-color":"#cbcece","fill-extrusion-height":["to-number",["get","height"]],"fill-extrusion-opacity":.5}},{id:"roads_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":"#ffffff","line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_minor_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#e2e2e2","line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"white","line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_medium_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#e1e1e1","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]}},{id:"roads_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_major_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e3cfd3","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_highway_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":"#ebcea2","line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]}},{id:"roads_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",["==","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":"#fefffc","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"transit_railway",type:"line",source:"protomaps","source-layer":"transit",filter:["all",["==","pmap:kind","railway"]],paint:{"line-color":"#b3bcc9","line-width":2}},{id:"transit_railway_tracks",type:"line",source:"protomaps","source-layer":"transit",filter:["all",["==","pmap:kind","railway"]],paint:{"line-color":"#ffffff","line-width":.8,"line-dasharray":[6,10]}},{id:"boundaries",type:"line",source:"protomaps","source-layer":"boundaries",paint:{"line-color":"#5c4a6b","line-width":.5,"line-dasharray":[3,2]}},{id:"physical_line_waterway_label",type:"symbol",source:"protomaps","source-layer":"physical_line",minzoom:14,layout:{"symbol-placement":"line","text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-field":["get","name"],"text-size":14,"text-letter-spacing":.3},paint:{"text-color":"white","text-halo-color":"#a4cae1","text-halo-width":2}},{id:"roads_bridges_other_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":"#ffffff","line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_bridges_other",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","other"]],paint:{"line-color":"#ffffff","line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,14.5,.5,20,12]}},{id:"roads_bridges_minor_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"#e2e2e2","line-gap-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_bridges_minor",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","minor_road"]],paint:{"line-color":"white","line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,32]}},{id:"roads_bridges_medium_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#e1e1e1","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32],"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,10.5,1]}},{id:"roads_bridges_medium",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","medium_road"]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,20,32]}},{id:"roads_bridges_major_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#e3cfd3","line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_bridges_major",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","major_road"]],paint:{"line-color":"#ffffff","line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,19,32]}},{id:"roads_bridges_highway_casing",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":"#ebcea2","line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]}},{id:"roads_bridges_highway",type:"line",source:"protomaps","source-layer":"roads",filter:["all",[">","pmap:level",0],["==","pmap:kind","highway"]],paint:{"line-color":"#fefffc","line-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,32]}},{id:"roads_labels",type:"symbol",source:"protomaps","source-layer":"roads",minzoom:13,layout:{"symbol-placement":"line","text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-field":["get","name"],"text-size":14},paint:{"text-color":"#91888b","text-halo-color":"white","text-halo-width":2}},{id:"mask",type:"fill",source:"protomaps","source-layer":"mask",paint:{"fill-color":"#dddddd"}},{id:"physical_point_ocean",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["==","place","sea"],["==","place","ocean"]],layout:{"text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-field":["get","name"],"text-size":14,"text-letter-spacing":.15},paint:{"text-color":"white","text-halo-color":"#a4cae1","text-halo-width":1}},{id:"physical_point_peak",type:"symbol",source:"protomaps","source-layer":"physical_point",filter:["any",["==","natural","peak"]],layout:{"text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-field":["get","name"],"text-size":14},paint:{"text-color":"#61bb5b","text-halo-color":"#ffffff","text-halo-width":1.5}},{id:"places_subplace",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","neighbourhood"],minzoom:10,layout:{"text-field":"{name}","text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-size":{base:1.2,stops:[[11,13],[14,15]]},"text-transform":"uppercase"},paint:{"text-color":"#757d91","text-halo-color":"white","text-halo-width":1}},{id:"places_city_circle",type:"circle",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","city"],paint:{"circle-radius":2,"circle-stroke-width":2,"circle-stroke-color":"white","circle-color":"#666666"},maxzoom:8},{id:"places_city",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","city"],layout:{"text-field":"{name}","text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-size":["step",["get","pmap:rank"],0,1,18,2,16],"text-variable-anchor":["bottom-left"],"text-radial-offset":.2},paint:{"text-color":"#787878","text-halo-color":"white","text-halo-width":1}},{id:"places_state",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","pmap:kind","state"],layout:{"text-field":"{name}","text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-size":12,"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":"#bdbdbd","text-halo-color":"white","text-halo-width":.5}},{id:"places_country",type:"symbol",source:"protomaps","source-layer":"places",filter:["==","place","country"],layout:{"text-field":"{name}","text-font":["Microsoft JhengHei","STHeitiTC-Medium"],"text-size":{base:1.2,stops:[[2,14],[6,14],[8,20]]},"text-transform":"uppercase"},paint:{"text-color":"#9590aa","text-halo-color":"white","text-halo-width":1}}]},It=new Map;class Mt{static getFactoryCacheKey(t){return"".concat(t.lat,",").concat(t.lng)}static getFactoryCache(t){return It.get(this.getFactoryCacheKey(t))}static setFactoryCache(t,e){It.set(this.getFactoryCacheKey(t),e)}}var At,Et=Mt,Tt=t=>"/images/marker-".concat(t,".svg"),Lt=t=>{var e;return null===(e=pt.find(e=>e.type==t))||void 0===e?void 0:e.color};function Dt(t){var e;return t.document_display_status?null===(e=pt.find(e=>e.documentDisplayStatuses.includes(t.document_display_status)))||void 0===e?void 0:e.type:pt[0].type}(function(t){t[t["OSM"]=0]="OSM",t[t["TAIWAN"]=1]="TAIWAN",t[t["SATELITE"]=2]="SATELITE",t[t["PROTOMAP"]=3]="PROTOMAP"})(At||(At={}));var Vt={[At.OSM]:"簡易地圖",[At.TAIWAN]:"詳細地圖",[At.SATELITE]:"衛星地圖",[At.PROTOMAP]:"向量地圖"},Ut=()=>{return Object.entries({zoomIn:"/images/zoom-in.svg",zoomOut:"/images/zoom-out.svg"}).reduce((t,e)=>{var[a,o]=e,i=document.createElement("img");return i.setAttribute("src",o),i.setAttribute("alt","zoomIn"===a?"放大":"縮小"),Object.assign(Object.assign({},t),{[a]:i})},{})},Pt=dt.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:new B["b"]({image:new z["a"]({anchorYUnits:Y["a"].PIXELS,anchorOrigin:wt["a"].BOTTOM_LEFT,src:Tt(e)}),zIndex:dt.indexOf(e)})}),{}),Bt=new B["b"]({}),zt=new B["b"]({image:new R["a"]({fill:new N["a"]({color:"#A22929"}),radius:12,stroke:new G["a"]({color:"#FFFFFF",width:1})})}),Rt=new Map;class Nt{constructor(t){this.appliedFilters=dt,this.factoryMap=new Map,this._map=t,this._factoriesLayerStatusMap={}}get mapInstance(){return this._map}get factories(){return[...this.factoryMap.values()]}getFactoriesLayerForStatus(t){var e=50;if(!this._factoriesLayerStatusMap["".concat(t)]){this._factoriesLayerStatusMap["".concat(t)]=new Q["a"]({features:[]});var a=new tt["a"]({distance:e,source:this._factoriesLayerStatusMap["".concat(t)]}),o={},i=new K["a"]({source:a,zIndex:3,style:(i,r)=>{var n=this.mapInstance.map.getView().getZoom(),s=a.getDistance();n>16?0!==s&&a.setDistance(0):s!==e&&a.setDistance(e);var l=i.get("features");if(l.length>1){var c=l.length,d=o[c];return d||(d=new B["b"]({image:new R["a"]({radius:20,stroke:new G["a"]({color:"#fff"}),fill:new N["a"]({color:Lt(t)})}),text:new $["a"]({text:c.toString(),fill:new N["a"]({color:"#fff"}),scale:1.8})}),o[c]=d),d}var p=l[0];return i.set("factoryId",p.get("factoryId")),p.getStyle()}});i.setProperties({factoryStatus:t}),this.mapInstance.map.addLayer(i)}return this._factoriesLayerStatusMap["".concat(t)]}getFactory(t){return this.factoryMap.get(t)}updateFactory(t,e){this.factoryMap.set(t,e);var a=this.getFactoriesLayerForStatus(Dt(e)).getFeatureById(t);if(a){var o=this.getFactoryStyle(e);Rt.set(t,o.clone()),a.setStyle(o)}}addFactories(t){var e=this.createFactoryFeature.bind(this),a=[],o=[];t.forEach(t=>{this.factoryMap.has(t.id)?o.push(t):a.push(t)});var i=a.map(e).filter(Boolean),r={};i.forEach(t=>{r[t.get("factoryStatus")]||(r[t.get("factoryStatus")]=[]),r[t.get("factoryStatus")].push(t)}),Object.entries(r).forEach(t=>{var[e,a]=t;this.getFactoriesLayerForStatus(e).addFeatures(a)})}hideFactories(t){t.forEach(t=>{var e=this.getFactoriesLayerForStatus(Dt(t)).getFeatureById(t.id);e.setStyle(Bt)})}setFactoryStatusFilter(t){this.appliedFilters=t,this.updateFactoriesFeatureStyle()}isFactoryVisible(t){return this.appliedFilters.includes(Dt(t))}getFactoryStyle(t){var e=this.isFactoryVisible(t);return e?Pt[Dt(t)]:Bt}createFactoryFeature(t){var e=Et.getFactoryCache(t);if(e)return null;var a=new V["a"]({geometry:new H["a"](Object(q["n"])([t.lng,t.lat],"EPSG:4326","EPSG:3857"))});a.setId(t.id),a.set("factoryId",t.id),a.set("factoryStatus",Dt(t));var o=this.getFactoryStyle(t);return Rt.set(t.id,o.clone()),a.setStyle(o),this.factoryMap.set(t.id,t),Et.setFactoryCache(t,a),a}forEachFeatureFactory(t){Object.entries(this._factoriesLayerStatusMap).forEach(e=>{var[,a]=e;a.getFeatures().forEach(e=>{var a=e.getId(),o=this.factoryMap.get(a);t(e,o)})})}displayAllFactory(){this.forEachFeatureFactory((t,e)=>{t.setStyle(Pt[Dt(e)])})}updateFactoriesFeatureStyle(){this.forEachFeatureFactory((t,e)=>{t.setStyle(this.getFactoryStyle(e))})}}var Gt=()=>{for(var t=Object(q["f"])("EPSG:3857"),e=t.getExtent(),a=new Array(21),o=Object(W["E"])(e)/256,i=new Array(21),r=0;r<21;++r)a[r]=o/Math.pow(2,r),i[r]=r;return new J["b"]({origin:Object(W["C"])(e),resolutions:a,matrixIds:i})},$t=(t,e)=>{if(t===At.PROTOMAP){var a=Object(q["o"])([119.90423060095736,21.83090666506977,122.2876172488333,25.33409668479448],"EPSG:4326","EPSG:3857"),o=new St["a"]({source:new Ct["a"]({attributions:'<a href="https://protomaps.com" target="_blank">Protomaps</a> © <a href="https://www.openstreetmap.org" target="_blank"> OpenStreetMap</a>',format:new Ot["a"],url:Object({VUE_APP_BASE_URL:"https://api.disfactory.tw/api",VUE_APP_IMGUR_FALLBACK_URL:"https://api.disfactory.tw/imgur",NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_PROTOMAP_SOURCE_URL||"https://api.disfactory.tw/tiles/{z}/{x}/{y}.pbf",maxZoom:14}),opacity:1,zIndex:1,renderMode:kt["a"].VECTOR});return o.setExtent(a),Object(Ft["a"])(o,jt,"protomaps"),o}var i=(()=>{switch(t){case At.OSM:return new et["a"]({crossOrigin:"Anonymous",attributions:'<a href="https://osm.tw/" target="_blank">OpenStreetMap 台灣</a>'});case At.TAIWAN:return new Z["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts",layer:"EMAP",tileGrid:e,crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'});case At.SATELITE:return new Z["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts/PHOTO_MIX/default/EPSG:3857/{TileMatrix}/{TileRow}/{TileCol}",layer:"EMAP",tileGrid:e,requestEncoding:"REST",crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'});default:return new et["a"]({crossOrigin:"Anonymous",attributions:'<a href="https://osm.tw/" target="_blank">OpenStreetMap 台灣</a>'})}})();return new X["a"]({source:i,opacity:.6,zIndex:1})},Yt=t=>{return new X["a"]({source:new Z["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts/nURBAN2/default/EPSG:3857/{TileMatrix}/{TileRow}/{TileCol}",layer:"LUIMAP",requestEncoding:"REST",tileGrid:t,tileLoadFunction:function(t,e){var a=t.getImage();xt(e).then(t=>{a.src=t})},crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'}),opacity:.5,zIndex:2,className:"lui-layer"})};class Ht{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.tileGrid=Gt(),this.hasInitialLocation=!1,this.mapDom=t,this.baseLayer=$t(At.OSM,this.tileGrid),this._map=this.instantiateOLMap(this.mapDom,this.baseLayer,a),a.minimap||(this.geolocation=this.setupGeolocationTracking(this._map)),this.setupEventListeners(this._map,e)}get map(){return this._map}setupEventListeners(t,e){var a=()=>Object(c["a"])(this,void 0,void 0,(function*(){var a=t.getView(),o=a.getZoom(),i=a.getResolutionForZoom(o),r=Math.ceil(i/2),[n,s]=Object(q["n"])(a.getCenter(),"EPSG:3857","EPSG:4326");if(e.onMoved){var{width:l,height:c}=this.mapDom.getBoundingClientRect(),d=yield this.canPlaceFactory([l/2,c/2]);e.onMoved([n,s,r,o],d)}}));t.on("change:resolution",a),t.on("moveend",a),t.on("rendercomplete",a),t.on("zoomend",()=>{var a=t.getView(),o=a.getZoom();e.onZoomed&&e.onZoomed(o)}),t.on("click",a=>Object(c["a"])(this,void 0,void 0,(function*(){if(e.onClicked){var[o,i]=Object(q["n"])(a.coordinate,"EPSG:3857","EPSG:4326"),r=t.forEachFeatureAtPixel(a.pixel,t=>t,{layerFilter:t=>{return 5!==t.getZIndex()}});e.onClicked([o,i],r)}}))),t.on("pointermove",e=>{e.dragging||(t.getTargetElement().style.cursor=t.hasFeatureAtPixel(t.getEventPixel(e.originalEvent))?"pointer":"")});var o=this.getLUIMAPLayer();o.on("change:visible",(function(){e.onLUILayerVisibilityChange&&e.onLUILayerVisibilityChange(o.getVisible())}))}setCoordinate(t,e,a){var o=this.map.getView();a=a||o.getZoom(),o.setCenter(Object(q["n"])([t,e],"EPSG:4326","EPSG:3857")),o.setZoom(a)}instantiateOLMap(t,e){var a,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Gt();if(i.getInitialLocation&&(o=i.getInitialLocation())){var[n,s,l]=o;a=new U["a"]({center:Object(q["n"])([n,s],"EPSG:4326","EPSG:3857"),zoom:l}),this.hasInitialLocation=!0}else a=new U["a"]({center:Object(q["n"])([120.48504632216294,24.088258816482295],"EPSG:4326","EPSG:3857"),zoom:14});var c=Ut(),d={target:t,layers:[e,Yt(r)],view:a,controls:[new at["a"]({zoomInLabel:c.zoomIn,zoomOutLabel:c.zoomOut,zoomInTipLabel:"放大",zoomOutTipLabel:"縮小"}),new ot["a"],new it["a"],new rt["a"]],interactions:Object(st["a"])({pinchRotate:!1}).extend([new lt["a"]({threshold:.4})])};return i.minimap&&(d.controls=[],d.interactions=[]),new P["a"](d)}setupGeolocationTracking(t){var e=t.getView(),a=new nt["a"]({trackingOptions:{enableHighAccuracy:!0},projection:e.getProjection()});a.setTracking(!0);var o=this.setupGeolocationLayer(a);return t.addLayer(o),a}setupGeolocationLayer(t){var e=new V["a"],a=t=>Number.isNaN(t)?new B["b"]({image:new R["a"]({fill:new N["a"]({color:"#0099ff"}),stroke:new G["a"]({color:"#fff",width:3}),radius:15})}):new B["b"]({image:new z["a"]({anchor:[.5,.5],src:"/images/now.svg",rotation:t,rotateWithView:!0})});e.setStyle(a(NaN)),t.on("change:position",(function(){var a=t.getPosition();e.setGeometry(a?new H["a"](a):void 0)})),t.on("change:heading",(function(){var o;e.setStyle(a(null!==(o=t.getHeading())&&void 0!==o?o:NaN))}));var o=new V["a"];t.on("change:accuracyGeometry",(function(){o.setGeometry(t.getAccuracyGeometry())}));var i=this.hasInitialLocation;t.on("change",()=>{if(!i){var e=t.getPosition();e&&(this.zoomToGeolocation(),i=!0)}});var r=new K["a"]({source:new Q["a"]({features:[e,o]}),zIndex:5});return r}zoomToGeolocation(){if(!this.geolocation)throw new Error("No location permission");var t=this.geolocation.getPosition();if(!t)throw new Error("No location permission");var e=this._map.getView();e.setCenter(t),e.setZoom(16)}changeBaseMap(t){this._map.removeLayer(this.baseLayer),this.baseLayer=$t(t,this.tileGrid),this._map.addLayer(this.baseLayer)}canPlaceFactory(t){return Object(c["a"])(this,void 0,void 0,(function*(){return new Promise(e=>{var a=!1,o=this._map.forEachLayerAtPixel(t,(function(t,o){var[,,,i]=o;a=!0,e(128!==i)}),{layerFilter:t=>"lui-layer"===t.getClassName()});a||e(void 0===o||o)})}))}getLUIMAPLayer(){var t;if(this._map.getLayers().forEach(e=>{"LUIMAP"===e.getProperties().source.layer_&&(t=e)}),!t)throw new TypeError("LUIMAP Layer not found");return t}setLUILayerVisible(t){var e=this.getLUIMAPLayer();e.setVisible(t)}getLUILayerVisible(){var t=this.getLUIMAPLayer();return t.getVisible()}setMinimapPin(t,e){var a=Object(q["n"])([t,e],"EPSG:4326","EPSG:3857");if(this.minimapPinFeature)this.minimapPinFeature.setGeometry(new H["a"](a));else{var o=new V["a"]({geometry:new H["a"](a)});o.setStyle(zt),this.minimapPinFeature=o;var i=new Q["a"]({features:[o]}),r=new K["a"]({source:i,zIndex:4});this.map.addLayer(r)}this._map.getView().setCenter(a)}}function Zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=new Ht(t,e,a);return window.changeBaseMap=o.changeBaseMap.bind(o),new Nt(o)}function Jt(t,e){var a=new Ht(t,{},{minimap:!0});return a.map.getView().setCenter(e),new Nt(a)}var qt=Symbol("MapModeSymbol");function Wt(){var t=Object(n["j"])(At.OSM);return Object(n["h"])(qt,{currentMapMode:t})}function Kt(){var t=Object(n["d"])(qt);if(!t)throw new Error("Please use provideMapMode before useMapMode.");return t}var Xt=Object(n["b"])({name:"SwitchMapModeButton",props:{isInSheet:{type:Boolean,default:!1}},setup(){var t=Object(n["j"])(!1),e=Object(n["d"])(T,Object(n["j"])()),{currentMapMode:a}=Kt(),o=Object(n["a"])({get:()=>a.value,set:o=>{var i;a.value=o,null===(i=e.value)||void 0===i||i.mapInstance.changeBaseMap(o),t.value=!1}}),i=[At.SATELITE,At.OSM,At.TAIWAN,At.PROTOMAP].map(t=>({type:t,name:Vt[t]})),r=Object(n["a"])(()=>{var t,e,a;return null!==(e=null===(t=i.find(t=>t.type===o.value))||void 0===t?void 0:t.name)&&void 0!==e?e:null===(a=i[0])||void 0===a?void 0:a.name});return{mapModeBottomSheet:t,mapModes:i,currentMapMode:o,currentMapModeName:r}}}),Qt=Xt,te=a("6544"),ee=a.n(te),ae=a("288c"),oe=a("8336"),ie=a("8860"),re=a("da13"),ne=a("5d23"),se=a("e0c7"),le=Object(y["a"])(Qt,L,D,!1,null,null,null),ce=le.exports;ee()(le,{VBottomSheet:ae["a"],VBtn:oe["a"],VList:ie["a"],VListItem:re["a"],VListItemTitle:ne["b"],VSubheader:se["a"]});var de=Object(n["b"])({name:"DisplaySettingBottomSheet",components:{SwitchMapModeButton:ce},setup(){var t=Object(n["j"])(!1),e=Object(n["d"])(T,Object(n["j"])()),a=Object(n["j"])(!1),o=Object(n["a"])({get:()=>{var t;return a.value=!!(null===(t=e.value)||void 0===t?void 0:t.mapInstance.getLUILayerVisible()),a.value},set:t=>{var o;null===(o=e.value)||void 0===o||o.mapInstance.setLUILayerVisible(t),a.value=t}});return{isOpen:t,isLUIMapVisable:o}}}),pe=de,ue=(a("4af8"),a("b0af")),me=a("e449"),ve=Object(y["a"])(pe,A,E,!1,null,"17c91206",null),fe=ve.exports;ee()(ve,{VBottomSheet:ae["a"],VBtn:oe["a"],VCard:ue["a"],VList:ie["a"],VListItem:re["a"],VMenu:me["a"],VSubheader:se["a"]});a("2b3d");var ye=a("bc3a"),ge=a.n(ye),be=a("9663"),he=a.n(be),_e="https://api.disfactory.tw/api",xe=ge.a.create({baseURL:_e,headers:{"Content-Type":"application/json"}});function we(t,e,a){return Object(c["a"])(this,void 0,void 0,(function*(){try{var{data:o}=yield xe.get("/factories?range=".concat(t,"&lng=").concat(e,"&lat=").concat(a));return o}catch(i){throw console.error(i),new TypeError("Get factory failed")}}))}function Se(t){return Object(c["a"])(this,void 0,void 0,(function*(){try{var{data:e}=yield xe.get("/factories/".concat(t));return e}catch(a){throw console.error(a),new TypeError("Get factory failed")}}))}var Ce="39048813b021935";function Oe(t){return Object(c["a"])(this,void 0,void 0,(function*(){var e=new FormData;e.append("image",t);var{data:a}=yield ge()({method:"POST",url:"https://api.imgur.com/3/image",data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Client-ID ".concat(Ce)}});return{link:a.data.link,deletehash:a.data.deletehash,file:t}}))}var ke=t=>t[0]+t[1]/60+t[2]/3600;function Fe(t){var e=new FileReader;return new Promise(a=>{e.onload=t=>{if(t.target){var e=he.a.readFromBinaryFile(t.target.result),o={};e.GPSLatitude&&(o.Latitude=ke(e.GPSLatitude)),e.GPSLongitude&&(o.Longitude=ke(e.GPSLongitude)),e.DateTimeOriginal&&(o.DateTimeOriginal=e.DateTimeOriginal),a(o)}else a({})},e.readAsArrayBuffer(t)})}function je(t){var{link:e,file:a,deletehash:o}=t;return Object(c["a"])(this,void 0,void 0,(function*(){var t=yield Fe(a),{data:i}=yield xe.post("/images",Object.assign(Object.assign({url:e},t),{deletehash:o}));return{token:i.token,src:URL.createObjectURL(a)}}))}function Ie(t){return Object(c["a"])(this,void 0,void 0,(function*(){return Promise.all(Array.from(t).map(t=>Oe(t).then(t=>je(t))))}))}function Me(t,e,a){var{nickname:o,contact:i}=a;return Object(c["a"])(this,void 0,void 0,(function*(){return Promise.all(Array.from(e).map(e=>Oe(e).then(e=>(()=>Object(c["a"])(this,void 0,void 0,(function*(){var a=yield Fe(e.file),{data:r}=yield xe.post("/factories/".concat(t,"/images"),Object.assign(Object.assign({url:e.link},a),{nickname:o,contact:i,deletehash:e.deletehash}));return r.image_path=e.link,r})))())))}))}function Ae(t){return Object(c["a"])(this,void 0,void 0,(function*(){try{var{data:e}=yield xe.post("/factories",JSON.stringify(t));return e}catch(a){throw console.error(a),new TypeError("Create factory failed")}}))}function Ee(t,e){return Object(c["a"])(this,void 0,void 0,(function*(){try{var{data:a}=yield xe.put("/factories/".concat(t),JSON.stringify(e));return a}catch(o){throw console.error(o),new TypeError("Update factory failed")}}))}function Te(t){return Object(c["a"])(this,void 0,void 0,(function*(){try{var{data:e}=yield xe.get("/factories/".concat(t,"/report_records"));return e}catch(a){throw console.error(a),new TypeError("Fetch factory error")}}))}var Le=a("0710"),De=a("698f"),Ve=Symbol("GASymbol");function Ue(t){Object(n["h"])(Ve,t.root.$gtag)}function Pe(){var t=Object(n["d"])(Ve);if(!t)throw new Error("use provideGA before useGA");var e=e=>{t.pageview({page_path:e})},a=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.event(e,a)};return{pageview:e,event:a}}a("466d");var Be=!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/)||!navigator.userAgent.match(/AppleWebKit/));/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function ze(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||"0",10)].join(".")}}function Re(){var t;return!!Be&&!!(t=ze())&&!!t.match(/^13\.(1|2|3)/)}var Ne,Ge=Symbol("ModalStateSymbol"),$e=()=>{var t=Object(n["i"])({updateFactorySuccessModal:!1,updateFactoryImageSuccessModal:!1,createFactorySuccessModal:!1,aboutModalOpen:!1,contactModalOpen:!1,safetyModalOpen:!1,gettingStartedModalOpen:"true"!==localStorage.getItem("use-app"),tutorialModalOpen:!1,supportIOSVersionModalOpen:Re(),sidebarOpen:!1,filterModalOpen:!1});return Object(n["h"])(Ge,t),t},Ye=()=>{var t=Object(n["d"])(Ge);if(!t)throw new Error("Use useModalState before provideModalState");var{event:e}=Pe(),a=()=>{t.updateFactoryImageSuccessModal=!0,window.setTimeout(()=>{t.updateFactoryImageSuccessModal=!1},3e3)},o=()=>{t.updateFactorySuccessModal=!0,window.setTimeout(()=>{t.updateFactorySuccessModal=!1},3e3)},i=()=>{t.createFactorySuccessModal=!0,window.setTimeout(()=>{t.createFactorySuccessModal=!1},3e3)},r=()=>{t.createFactorySuccessModal=!1},s=()=>{t.aboutModalOpen=!0},l=()=>{t.aboutModalOpen=!1},c=()=>{t.contactModalOpen=!0},d=()=>{t.contactModalOpen=!1},p=()=>{t.safetyModalOpen=!0},u=()=>{t.safetyModalOpen=!1},m=()=>{t.gettingStartedModalOpen=!0},v=()=>{t.gettingStartedModalOpen=!1},f=()=>{t.tutorialModalOpen=!0},y=()=>{t.tutorialModalOpen=!1},g=()=>{t.supportIOSVersionModalOpen=!1},b=()=>{var a=!t.sidebarOpen;e("toggleSidebar",{target:a}),t.sidebarOpen=a},h=()=>{e("closeFilterModal"),t.filterModalOpen=!1},_=()=>{e("openFilterModal"),t.filterModalOpen=!0},x={openUpdateFactorySuccessModal:o,openUpdateFactoryImagesSuccessModal:a,openCreateFactorySuccessModal:i,closeCreateFactorySuccessModal:r,openAboutModal:s,closeAboutModal:l,openContactModal:c,closeContactModal:d,openSafetyModal:p,closeSafetyModal:u,openGettingStartedModal:m,closeGettingStartedModal:v,openTutorialModal:f,closeTutorialModal:y,toggleSidebar:b,openFilterModal:_,closeFilterModal:h,closesupportIOSVersionModal:g};return[t,x]},He=Symbol("AppState");(function(t){t["INITIAL"]="INITIAL",t["CREATE_FACTORY_1"]="CREATE_FACTORY_1",t["CREATE_FACTORY_2"]="CREATE_FACTORY_2",t["CREATE_FACTORY_3"]="CREATE_FACTORY_3",t["UPDATE_FACTORY_IMAGES"]="UPDATE_FACTORY_IMAGES",t["UPDATE_FACTORY_MODE"]="UPDATE_FACTORY_MODE"})(Ne||(Ne={}));var Ze,Je=[Ne.CREATE_FACTORY_1,Ne.CREATE_FACTORY_2,Ne.CREATE_FACTORY_3],qe=[Ne.UPDATE_FACTORY_IMAGES,Ne.UPDATE_FACTORY_MODE],We=()=>{var t=Object(n["i"])({pageState:Ne.INITIAL,factoryData:null,factoryLocation:[],isCreateMode:Object(n["a"])(()=>Je.includes(t.pageState)),createStepIndex:Object(n["a"])(()=>Je.indexOf(t.pageState)+1),isEditImagesMode:Object(n["a"])(()=>t.pageState===Ne.UPDATE_FACTORY_IMAGES),isEditFactoryMode:Object(n["a"])(()=>t.pageState===Ne.UPDATE_FACTORY_MODE),updateFactoryField:"others",isEditComment:Object(n["a"])(()=>t.pageState===Ne.UPDATE_FACTORY_MODE&&"others"===t.updateFactoryField),isEditName:Object(n["a"])(()=>t.pageState===Ne.UPDATE_FACTORY_MODE&&"name"===t.updateFactoryField),isEditType:Object(n["a"])(()=>t.pageState===Ne.UPDATE_FACTORY_MODE&&"factory_type"===t.updateFactoryField),isEditMode:Object(n["a"])(()=>qe.includes(t.pageState)),isInitialState:Object(n["a"])(()=>t.pageState===Ne.INITIAL),selectFactoryMode:Object(n["a"])(()=>t.pageState===Ne.CREATE_FACTORY_1),formPageOpen:Object(n["a"])(()=>Je.includes(t.pageState)||t.pageState===Ne.UPDATE_FACTORY_IMAGES),isInitialPage:Object(n["a"])(()=>t.pageState===Ne.INITIAL),mapLngLat:[],canPlaceFactory:!1,factoryDetailsExpanded:!1});return Object(n["h"])(He,t),[t]},Ke=t=>{var{event:e,pageview:a}=Pe(),o=()=>{throw new Error("Invalid page transition")},i={startCreateFactory(){t.pageState===Ne.INITIAL?t.pageState=Ne.CREATE_FACTORY_1:o(),e("enterSelectFactoryMode")},gotoNextCreate(){var e=Je.indexOf(t.pageState);-1!==e&&e!==Je.length-1?t.pageState=Je[e+1]:o(),0===e&&a("/create")},nextCreateStep(){var e=Je.indexOf(t.pageState);Je[e+1]&&(t.pageState=Je[e+1])},previousCreateStep(){var e=Je.indexOf(t.pageState);Je[e-1]&&(t.pageState=Je[e-1])},cancelCreateFactory(){t.pageState in Je?t.pageState=Ne.INITIAL:o(),e("exitSelectFactoryMode")},gotoCreateStep(e){Je[e]?t.pageState=Je[e]:o()},startUpdateFactoryImages(){t.pageState===Ne.INITIAL?t.pageState=Ne.UPDATE_FACTORY_IMAGES:o(),a("/edit")},cancelUpdateFactoryImages(){t.pageState===Ne.UPDATE_FACTORY_IMAGES?t.pageState=Ne.INITIAL:o(),e("exitUpdateFactoryImagesMode")},startUpdateFactoryComment(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";t.pageState===Ne.INITIAL?(t.pageState=Ne.UPDATE_FACTORY_MODE,t.updateFactoryField=e):o(),a("/editComment")},cancelUpdateFactoryComment(){t.pageState===Ne.UPDATE_FACTORY_MODE?t.pageState=Ne.INITIAL:o(),e("exitUpdateFactoryCommentsMode")},closeFactoryPage(){Je.includes(t.pageState)||qe.includes(t.pageState)?t.pageState=Ne.INITIAL:o(),e("closeFactoryPage")}};function r(e){t.factoryData=e}function n(){t.factoryDetailsExpanded=!0}function s(){var e,a,o,i=Rt.get(null===(e=t.factoryData)||void 0===e?void 0:e.id);i&&(null===(o=null===(a=t.factoryData)||void 0===a?void 0:a.feature)||void 0===o||o.setStyle(i)),t.factoryDetailsExpanded=!1,t.factoryData=null}function l(){t.factoryDetailsExpanded=!t.factoryDetailsExpanded}return{pageTransition:i,updateFactoryData:r,openEditFactoryForm(t){r(t),i.startUpdateFactoryImages(),a("/edit")},setFactoryLocation(a){t.factoryLocation=a,e("setFactoryLocation")},expandFactoryDetail:n,collapseFactoryDetail:s,toggleFactoryDetail:l}},Xe=()=>{var t=Object(n["d"])(He);return[t,Ke(t)]},Qe=Symbol("AlertState");(function(t){t["info"]="info",t["warn"]="warn",t["error"]="error"})(Ze||(Ze={}));var ta=()=>{var t=Object(n["i"])({alert:null});return Object(n["h"])(Qe,t),[t]},ea=t=>({showAlert:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ze.warn,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"此錯誤訊息將在3秒後消失。";t.alert={title:e,level:o,dismissText:i},t.timeout=window.setTimeout(()=>{t.alert=null,t.timeout=void 0},a)},dismissAlert:function(){t.alert=null,t.timeout&&(window.clearTimeout(t.timeout),t.timeout=void 0)}}),aa=()=>{var t=Object(n["d"])(Qe);return[t,ea(t)]};a("b680"),a("1276");function oa(t){var e=/^#(.+)/.exec(t);return e?e[1].split("&").reduce((t,e)=>{var[a,o]=e.split("=");return Object.assign(Object.assign({},t),{[a]:o})},{}):{}}function ia(t){return"#"+Object.entries(t).map(t=>{var[e,a]=t;return"".concat(e,"=").concat(a)}).join("&")}var ra=["lat","lng","zoom"],na=new class{constructor(){this.s={},this.lng=this.defineGetterSetter("lng"),this.lat=this.defineGetterSetter("lat"),this.zoom=this.defineGetterSetter("zoom")}load(t){var{map:e}=oa(t.hash),a=/([\d.]+)\/([\d.]+)\/([\d.]+)$/.exec(e);null!==a&&(this.s.zoom=parseFloat(a[1]),this.s.lng=parseFloat(a[2]),this.s.lat=parseFloat(a[3]))}dumps(){var t;return ra.some(t=>"undefined"===typeof this.s[t])?"":"#map=".concat(null===(t=this.s.zoom)||void 0===t?void 0:t.toFixed(2),"/").concat(this.s.lng,"/").concat(this.s.lat)}defineGetterSetter(t){var e=this;return function(){return arguments.length>0&&(e.s[t]=arguments.length<=0?void 0:arguments[0]),e.s[t]}}};function sa(t,e,a){return Object(c["a"])(this,void 0,void 0,(function*(){var o=oa(e.hash),{factoryId:i}=o,r=Object(c["b"])(o,["factoryId"]);if(i){var n=yield Se(i);n&&(t.addFactories([n]),t.mapInstance.setCoordinate(n.lng,n.lat),e.hash=ia(r),a(i))}}))}var la=t=>new Promise(e=>t.root.$nextTick(e)),ca=Object(n["b"])({components:{AppButton:b,AppNavbar:C,AppTextField:M,DisplaySettingBottomSheet:fe},props:{setFactoryLocation:{type:Function,required:!0}},setup(t,e){var{event:a}=Pe(),o=Object(n["j"])(null),i=Object(n["j"])(null),r=Object(n["d"])(T,Object(n["j"])()),[,s]=Ye(),[l,{openEditFactoryForm:d,pageTransition:u,expandFactoryDetail:m}]=Xe(),[,v]=aa(),f=t=>{if(r.value){var e=t.get("factoryId"),a=r.value.getFactory(e);a&&(a.feature=t,l.factoryData=a)}},y=function(){r.value&&r.value.mapInstance.map.updateSize()},g=()=>{l.factoryData&&d(l.factoryData)};function b(){r.value&&(r.value.mapInstance.setLUILayerVisible(!0),u.startCreateFactory())}Object(n["e"])(()=>{var t=new Le["a"]({element:i.value,positioning:De["a"].BOTTOM_LEFT}),n=(t,o)=>Object(c["a"])(this,void 0,void 0,(function*(){var t,i,n,s,c,d,p,u,v,g,b,h,_,x,w;if((null===(i=null===(t=l.factoryData)||void 0===t?void 0:t.feature)||void 0===i?void 0:i.get("defaultStyle"))&&(null===(s=null===(n=l.factoryData)||void 0===n?void 0:n.feature)||void 0===s||s.setStyle(null===(d=null===(c=l.factoryData)||void 0===c?void 0:c.feature)||void 0===d?void 0:d.get("defaultStyle"))),o)if(a("clickFactoryPin"),o.get("factoryId"))f(o),e.root.$vuetify.breakpoint.mdAndUp&&m();else{var S=o.getGeometry(),C=S.getCoordinates();null===(v=null===(u=null===(p=null===r||void 0===r?void 0:r.value)||void 0===p?void 0:p.mapInstance)||void 0===u?void 0:u.map)||void 0===v||v.getView().setCenter(C);var O=null===(h=null===(b=null===(g=null===r||void 0===r?void 0:r.value)||void 0===g?void 0:g.mapInstance)||void 0===b?void 0:b.map)||void 0===h?void 0:h.getView().getZoom();null===(w=null===(x=null===(_=null===r||void 0===r?void 0:r.value)||void 0===_?void 0:_.mapInstance)||void 0===x?void 0:x.map)||void 0===w||w.getView().setZoom((O||0)+1)}else l.factoryData=null;yield la(e),y()})),s=null,d=p()((function(t,e,a){return Object(c["a"])(this,void 0,void 0,(function*(){var o=yield we(t,e,a);Array.isArray(o)&&s.addFactories(o)}))}),500);s=Zt(o.value,{onMoved:function(t,e){var[o,i,r,n]=t;return Object(c["a"])(this,void 0,void 0,(function*(){na.lat(i),na.lng(o),na.zoom(n),window.location.hash=na.dumps(),l.canPlaceFactory=e,l.mapLngLat=[o,i],a("moveMap");try{yield d(r,o,i)}catch(t){}}))},onClicked:n,onZoomed:function(t){na.zoom(t),window.location.hash=na.dumps()}},{getInitialLocation:function(){if(na.load(window.location),""!==na.dumps())return[na.lng(),na.lat(),na.zoom()]}}),sa(s,window.location,t=>{var e,a=null===(e=null===r||void 0===r?void 0:r.value)||void 0===e?void 0:e.getFactory(t);if(a){var o=s.getFactoriesLayerForStatus(Dt(a)).getFeatureById(t);n([0,0],o)}}),s.mapInstance.map.addOverlay(t),r.value=s,s.mapInstance.setLUILayerVisible(!1)}),Object(n["e"])(()=>{window.addEventListener("resize",y)}),Object(n["f"])(()=>{window.removeEventListener("resize",y)});var h=Object(n["j"])(dt),_=t=>h.value.includes(t),x=t=>{r.value&&(_(t)?h.value=h.value.filter(e=>e!==t):h.value=[...h.value,t],r.value.mapInstance.map.getLayers().forEach(t=>{var e=t.get("factoryStatus");if(void 0!==e){var a="default"===e?e:Number(e);h.value.includes(a)?t.setVisible(!0):t.setVisible(!1)}}))},w=dt.map(t=>({text:mt(t),color:vt(t),value:t,name:t}));return{root:o,modalActions:s,popup:i,zoomToGeolocation:function(){if(r.value){a("zoomToGeolocation");try{r.value.mapInstance.zoomToGeolocation()}catch(t){v.showAlert("您沒開放手機定位權限， \n請開放定位權限以用定位功能。")}}},appState:l,onClickEditFactoryData:g,onClickCreateFactoryButton:b,onClickFilterButton:x,filterButtonsData:w,checkActive:_,appliedFilters:h}}}),da=ca,pa=(a("5679"),a("132d")),ua=Object(y["a"])(da,s,l,!1,null,"6845ec70",null),ma=ua.exports;ee()(ua,{VBtn:oe["a"],VIcon:pa["a"]});var va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{base:!0,open:t.value},attrs:{"data-label":"sidebar-close"},on:{click:t.close}},[a("div",{class:{sidebar:!0,open:t.value}},[a("div",{staticClass:"close",attrs:{"data-label":"sidebar-close"},on:{click:t.close}}),a("h1",[t._v("主選單")]),a("hr"),a("ul",t._l(t.links,(function(e,o){return a("li",{key:o},[a("a",{attrs:{"data-label":"sidebar-"+e.text,href:t.getHref(e),target:t.getTarget(e)},on:{click:function(a){return a.stopPropagation(),t.onClick(e)}}},[t._v(t._s(e.text))])])})),0)])])},fa=[],ya=Object(n["b"])({name:"AppSidebar",props:{value:{type:Boolean,required:!0}},setup(t,e){var[,a]=Ye(),o=[{text:"使用說明",action:a.openTutorialModal},{text:"安全須知",action:a.openSafetyModal},{text:"聯絡我們",action:a.openContactModal},{text:"常見問題",href:"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240"},{text:"關於回報系統",href:"https://about.disfactory.tw"},{text:"問題回報",href:"https://airtable.com/shrUraKakZRpH52DO"}],i=()=>{e.emit("input",!1)};return{links:o,close:i,onClick:t=>{"function"===typeof t.action&&t.action()},getHref:t=>{return t.href},getTarget:t=>{return"string"===typeof t.href?"_blank":null}}}}),ga=ya,ba=(a("4ce5"),Object(y["a"])(ga,va,fa,!1,null,"593c9697",null)),ha=ba.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.alert?a("div",{staticClass:"app-alert"},[a("div",{staticClass:"close",attrs:{"data-label":"alert-close"},on:{click:t.dismiss}}),a("img",{attrs:{src:"/images/alert.svg",alt:"alert"}}),a("div",[a("div",{staticClass:"alert-title"},[t._v(t._s(t.alert.title))]),a("p",{staticClass:"alert-descriptioin"},[t._v(t._s(t.alert.dismissText))])])]):t._e()},xa=[],wa=Object(n["b"])({name:"AppAlert",props:{alert:{type:Object},dismiss:{type:Function}}}),Sa=wa,Ca=(a("9e22"),Object(y["a"])(Sa,_a,xa,!1,null,"2a0f768e",null)),Oa=Ca.exports,ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-factory-steps"},[a("v-app-bar",{staticClass:"d-block d-md-none",attrs:{fixed:"",color:"white"}},[a("div",{staticClass:"btn-container",class:{hide:1===t.appState.createStepIndex}},[a("v-btn",{staticClass:"secondary--text",attrs:{icon:""},on:{click:t.onBack}},[a("v-icon",[t._v("mdi-keyboard-backspace")])],1)],1),a("v-spacer"),a("v-toolbar-title",{staticClass:"secondary--text"},[t._v("新增可疑工廠 步驟 ("+t._s(t.appState.createStepIndex)+"/3)")]),a("v-spacer"),a("div",{staticClass:"btn-container"},[a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"secondary--text",attrs:{icon:""}},"v-btn",i,!1),o),[a("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v("放棄新增可疑工廠嗎？")]),a("v-card-text",[t._v("放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續填寫資料")]),a("a",{staticClass:"d-block mt-4 text-decoration-underline",on:{click:t.cancelCreateFactory}},[t._v("放棄新增")])],1)],1)],1)],1)],1),a("v-app-bar",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],attrs:{fixed:"",color:"white"}},[a("v-toolbar-title",[t._v("新增可疑工廠")]),a("div",{staticClass:"ml-15 desktop-step-item",on:{click:function(e){return t.switchStep(1)}}},[a("span",[t._v("選擇工廠位置")]),a("v-icon",{staticClass:"mr-1"},[t._v("mdi-chevron-right")])],1),a("div",{staticClass:"desktop-step-item",class:{inactive:t.appState.createStepIndex<2},on:{click:function(e){return t.switchStep(2)}}},[a("span",[t._v("上傳工廠照片")]),a("v-icon",{staticClass:"mr-1"},[t._v("mdi-chevron-right")])],1),a("div",{staticClass:"desktop-step-item",class:{inactive:t.appState.createStepIndex<3},on:{click:function(e){return t.switchStep(3)}}},[a("span",[t._v("確認及補充工廠資訊")])]),a("v-spacer"),t.$vuetify.breakpoint.mdAndUp?a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{outlined:""}},"v-btn",i,!1),o),[t._v(" 取消新增 ")])]}}],null,!1,67231085),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v("放棄新增可疑工廠嗎？")]),a("v-card-text",[t._v("放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續填寫資料")]),a("a",{staticClass:"d-block mt-4 text-decoration-underline",on:{click:t.cancelCreateFactory}},[t._v("放棄新增")])],1)],1)],1):t._e()],1),1===t.appState.createStepIndex?a("div",{staticClass:"create-factory-step-1"},[t.showLongLat?a("div",{staticClass:"select-location-container container-fluid pa-3 py-md-5 px-md-10",class:{desktop:t.$vuetify.breakpoint.mdAndUp}},[a("div",{staticClass:"d-flex flex-md-row justify-space-between align-end align-md-center"},[a("div",{staticClass:"d-flex flex-column flex-md-row align-start align-md-center justify-space-between justify-md-start flex-grow-1"},[a("p",{staticClass:"mb-4 my-md-3 mr-md-10 wgs"},[t._v("以下經緯度版本為WGS84")]),t.inlineLocationForm?t._e():a("p",{staticClass:"font-weight-medium h5 mb-0 mb-1-md mr-md-10 location-text"},[t._v(" 經度："+t._s(t.appState.mapLngLat[0].toFixed(7))+" ")]),t.inlineLocationForm?t._e():a("p",{staticClass:"font-weight-medium h5 mb-0 mr-md-8 location-text"},[t._v(" 緯度："+t._s(t.appState.mapLngLat[1].toFixed(7))+" ")]),t.inlineLocationForm?t._e():a("v-btn",{staticClass:"mr-2 d-none d-md-block primary--text",attrs:{rounded:"",color:"white"},on:{click:t.toggleInlineLocationForm}},[t._v(" 搜尋經緯度 ")]),t.inlineLocationForm?a("div",{staticClass:"d-none d-md-flex justify-space-between align-center flex-grow-1"},[a("div",{staticClass:"d-flex align-center"},[a("p",{staticClass:"font-weight-medium h5 mb-0  mr-7"},[t._v(" 搜尋經緯度 ")]),a("div",{staticClass:"d-block  mr-7",staticStyle:{height:"36px",width:"1px","background-color":"#EAF3BF"}}),a("h5",{staticClass:" mr-2"},[t._v("經度")]),a("v-text-field",{staticClass:" mr-7",attrs:{"hide-details":"",outilned:"",solo:"",placeholder:"例：121.5231872",dense:""},model:{value:t.locationInputState.longitude,callback:function(e){t.$set(t.locationInputState,"longitude",e)},expression:"locationInputState.longitude"}}),a("h5",{staticClass:" mr-2"},[t._v("緯度")]),a("v-text-field",{staticClass:" mr-7",attrs:{"hide-details":"",outilned:"",solo:"",placeholder:"例：25.0458344",dense:""},model:{value:t.locationInputState.latitude,callback:function(e){t.$set(t.locationInputState,"latitude",e)},expression:"locationInputState.latitude"}}),a("h5",{staticClass:"text-decoration-underline mr-5",staticStyle:{cursor:"pointer"},on:{click:t.clearLocationInput}},[t._v("清空")]),a("v-btn",{staticClass:"primary--text",attrs:{rounded:"",color:"white"},on:{click:t.setLocation}},[t._v("定位")])],1),t.inlineLocationForm?a("div",{staticClass:"d-flex align-center"},[a("div",{staticClass:"d-block d-none d-md-block mx-7",staticStyle:{height:"36px",width:"1px","background-color":"#EAF3BF"}}),a("v-btn",{staticClass:"primary--text",attrs:{icon:""},on:{click:t.toggleInlineLocationForm}},[a("v-icon",{attrs:{color:"white"}},[t._v("mdi-close")])],1)],1):t._e()]):t._e()],1),a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-2 d-md-none primary--text",attrs:{rounded:"",color:"white"}},"v-btn",i,!1),o),[t._v(" 搜尋經緯度 ")])]}}],null,!1,1129603853),model:{value:t.chooseLocationDialog,callback:function(e){t.chooseLocationDialog=e},expression:"chooseLocationDialog"}},[a("v-card",{staticClass:"primary",attrs:{outlined:""}},[a("v-card-text",{staticClass:"pt-4 white--text"},[a("p",[t._v(" 以下經緯度版本為WGS84 ")]),a("h3",{staticClass:"mb-2"},[t._v("經度")]),a("v-text-field",{attrs:{outilned:"",solo:"",placeholder:"例：121.5231872"},model:{value:t.locationInputState.longitude,callback:function(e){t.$set(t.locationInputState,"longitude",e)},expression:"locationInputState.longitude"}}),a("h3",{staticClass:"mb-2"},[t._v("緯度")]),a("v-text-field",{attrs:{outilned:"",solo:"",placeholder:"例：25.0458344"},model:{value:t.locationInputState.latitude,callback:function(e){t.$set(t.locationInputState,"latitude",e)},expression:"locationInputState.latitude"}}),a("div",{staticClass:"d-flex justify-space-between mt-3 align-end"},[a("a",{staticClass:"text-decoration-underline white--text",staticStyle:{height:"36px","line-height":"36px"},on:{click:t.clearLocationInput}},[t._v("清空")]),a("v-btn",{staticClass:"primary--text",attrs:{rounded:"",color:"white"},on:{click:t.setLocation}},[t._v("定位")])],1)],1)],1)],1)],1)]):t._e(),a("div",{staticClass:"px-5 py-4"},[a("v-btn",{staticClass:"mr-2 primary--text",attrs:{rounded:"",color:"white"},on:{click:t.toggleShowLongLat}},[t._v(" "+t._s(t.showLongLat?"隱藏經緯度":"顯示經緯度")+" ")]),a("switch-map-mode-button"),a("v-container",{staticClass:"choose-location-btn-container d-flex justify-center",attrs:{fluid:"",bottom:"50"}},[a("v-btn",{staticClass:"px-md-15",attrs:{"x-large":"",rounded:"",color:"secondary"},on:{click:t.chooseLocation}},[t._v(" 選擇此地點 ")])],1)],1)]):t._e(),2===t.appState.createStepIndex?a("image-upload-form",{attrs:{uploading:t.imageUploadState.uploading,error:t.imageUploadState.error,previewImages:t.uploadedImages,onClickRemoveImage:t.onClickRemoveImage,valid:t.imageUploadFormValid,submit:t.pageTransition.gotoNextCreate,formState:t.formState},model:{value:t.selectedImages,callback:function(e){t.selectedImages=e},expression:"selectedImages"}}):t._e(),3===t.appState.createStepIndex?a("confirm-factory",{attrs:{formState:t.formState,previewImages:t.uploadedImages,submit:t.submitFactory}}):t._e()],1)},Fa=[],ja=(a("a79d"),()=>{var t=Object(n["j"])([]),e=Object(n["i"])({error:null,uploading:!1}),a=Object(n["j"])(null);Object(n["k"])(a,()=>{e.error=null,a.value&&(e.uploading=!0,Ie(a.value).then(e=>{t.value=[...t.value,...e]}).catch(t=>{console.error(t),e.error=!0}).finally(()=>{e.uploading=!1}))});var o=e=>{var{src:a}=e;t.value=t.value.filter(t=>t.src!==a)},i=Object(n["a"])(()=>t.value.length>0&&!e.uploading);return{selectedImages:a,imageUploadState:e,uploadedImages:t,onClickRemoveImage:o,imageUploadFormValid:i}}),Ia=()=>{var t=Object(n["j"])([]),e={error:null,uploading:!1},a=Object(n["j"])(null);Object(n["k"])(a,()=>{if(a.value){var e=Array.from(a.value).map(t=>URL.createObjectURL(t)).map(t=>({src:t,token:t}));t.value=[...t.value,...e]}});var o=e=>{var{src:a}=e;t.value=t.value.filter(t=>t.src!==a)},i=Object(n["a"])(()=>t.value.length>0);return{selectedImages:a,imageUploadState:e,uploadedImages:t,onClickRemoveImage:o,imageUploadFormValid:i}},Ma=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"image-upload-form w-100"},[a("v-container",{staticClass:"pt-3 pt-md-12 pb-md-8",staticStyle:{"max-width":"630px",position:"relative"}},[a("h2",{staticClass:"mb-4 secondary--text"},[t._v("上傳工廠照片")]),a("p",[t._v("請至少上傳一張工廠照片。")]),a("h3",{staticClass:"mb-3 mt-7 primary--text required"},[t._v("工廠照片")]),a("div",{staticClass:"flex align-items-center mb-3"},[a("v-btn",{staticClass:"mr-3",attrs:{disabled:t.uploading,outlined:""}},[a("label",[a("input",{ref:"image",staticStyle:{display:"none"},attrs:{multiple:"",type:"file",accept:"image/*",disabled:t.uploading},on:{change:t.onChange}}),t._v(" 新增照片 ")])]),t.uploading&&!t.disableProgressiveUpload?a("span",[t._v("上傳中...")]):t._e(),!t.valid||t.uploading||t.error||t.disableProgressiveUpload?t._e():a("span",[t._v(" 上傳成功 "),a("v-icon",{staticClass:"primary--text"},[t._v("mdi-checkbox-marked-circle")])],1),t.error&&!t.disableProgressiveUpload?a("span",[t._v("上傳錯誤")]):t._e()],1),a("div",{staticClass:"preview-images-container mb-2"},t._l(t.previewImages,(function(e){return a("div",{key:e.token,staticClass:"uploaded-image"},[a("img",{attrs:{src:e.src}}),a("button",{staticClass:"remove-image-btn",on:{click:function(a){return t.removeImage(e)}}})])})),0),a("hr"),a("h2",{staticClass:"mt-7 mb-2 secondary--text"},[t._v("聯絡資訊（非必填）")]),a("p",[t._v(" 如果對於照片有疑問，"),a("br"),t._v(" 我們會透過以下提供的資訊聯絡你。"),a("br"),t._v(" 如不願揭露自己身份，可跳過不填。 ")]),a("h3",{staticClass:"primary--text mt-7 mb-2"},[t._v("聯絡人暱稱")]),a("v-text-field",{attrs:{outlined:"",placeholder:"例：林先生、林小姐"},model:{value:t.formState.nickname,callback:function(e){t.$set(t.formState,"nickname",e)},expression:"formState.nickname"}}),a("h3",{staticClass:"primary--text mt-7 mb-2"},[t._v("聯絡方式 (email或電話)")]),a("v-text-field",{attrs:{outlined:"",placeholder:"例：abc@email.com、0920-123456"},model:{value:t.formState.contact,callback:function(e){t.$set(t.formState,"contact",e)},expression:"formState.contact"}}),a("div",{staticClass:"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9"},[a("v-btn",{staticStyle:{width:"100%","max-width":"345px"},attrs:{"x-large":"",rounded:"",disabled:!t.valid,color:"primary"},on:{click:t.onSubmit}},[t._v(" "+t._s(t.submitText||"下一步")+" ")])],1)],1)],1)},Aa=[],Ea=Object(n["b"])({props:{previewImages:{type:Array,default:[]},uploading:{default:!1},error:{default:null},onClickRemoveImage:{type:Function},submit:{type:Function},valid:{type:Boolean,default:!1},formState:{type:Object},submitText:{type:String},disableProgressiveUpload:{type:Boolean,default:!1}},name:"ImageUploadForm",setup(t,e){return{images:[],onChange:function(t){e.emit("input",t.target.files)},onSubmit(){t.valid&&"function"===typeof t.submit&&t.submit()},removeImage:e=>{t.onClickRemoveImage(e)}}}}),Ta=Ea,La=(a("dafd"),a("a523")),Da=a("8654"),Va=Object(y["a"])(Ta,Ma,Aa,!1,null,"9c1898e4",null),Ua=Va.exports;ee()(Va,{VBtn:oe["a"],VContainer:La["a"],VIcon:pa["a"],VTextField:Da["a"]});var Pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"confirm-factory-page"},[a("v-container",{staticClass:"pt-3 pt-md-12",staticStyle:{"max-width":"630px",position:"relative"}},[a("h2",{staticClass:"mt-2 mb-2 secondary--text"},[t._v("確認及補充工廠資訊")]),a("p",[t._v("請確認工廠地點及照片，並補充工廠資訊。")]),a("h3",{staticClass:"mt-7 mb-2 required primary--text"},[t._v("工廠地點")]),a("p",[t._v(" 返回"),a("a",{on:{click:t.gotoStepOne}},[t._v("步驟(1/3)")]),t._v("編輯 ")]),a("div",{staticClass:"d-flex flex-column flex-md-row justify-md-between"},[a("div",{staticClass:"w-100 minimap-container",class:{desktop:t.$vuetify.breakpoint.mdAndUp},staticStyle:{position:"relative"}},[a("minimap",{attrs:{initialFactories:t.initialFactories,initialLocation:t.initialLocation,pinLocation:t.appState.factoryLocation}}),a("div",{staticClass:"minimap-overlay",on:{click:t.gotoStepOne}})],1),a("div",{staticClass:"d-flex justify-between mt-3 mt-md-0 ml-md-4 d-md-inline-flex flex-md-column justify-md-start"},[a("p",[t._v(" 經度："+t._s(t.appState.factoryLocation[0].toFixed(7))+" "),a("br"),t._v(" 緯度："+t._s(t.appState.factoryLocation[1].toFixed(7))+" ")]),a("p",[a("small",[t._v("以上經緯度版本為WGS84")])])])]),a("h3",{staticClass:"mt-7 mb-2 required primary--text"},[t._v("工廠照片")]),a("p",[t._v(" 返回"),a("a",{on:{click:t.gotoStepTwo}},[t._v("步驟(2/3)")]),t._v("編輯 ")]),a("div",{staticClass:"preview-images-container mb-2"},t._l(t.previewImages,(function(t){return a("div",{key:t.token,staticClass:"uploaded-image"},[a("img",{attrs:{src:t.src}})])})),0),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("聯絡人暱稱")]),a("p",[t._v(t._s(t.formState.nickname||"未填寫"))]),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("聯絡方式 (email或電話)")]),a("p",[t._v(t._s(t.formState.contact||"未填寫"))]),a("hr"),a("h2",{staticClass:"mt-5 secondary--text mb-5"},[t._v("其他工廠資訊（非必填）")]),a("p",[t._v("提供明確的工廠資訊能夠幫助我們更快速的填寫公文。")]),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("工廠描述")]),a("v-textarea",{attrs:{outlined:"",solo:"",placeholder:"例：常常散發異味"},model:{value:t.formState.others,callback:function(e){t.$set(t.formState,"others",e)},expression:"formState.others"}}),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("工廠外部文字")]),a("v-text-field",{attrs:{outlined:"",placeholder:"例：小明化工廠",color:"primary"},model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}}),a("h3",{staticClass:"mt-5 mb-2 primary--text"},[t._v("工廠類型")]),a("v-select",{attrs:{items:t.factoryTypeItems,solo:"",outlined:"",placeholder:"未選擇"},model:{value:t.formState.type,callback:function(e){t.$set(t.formState,"type",e)},expression:"formState.type"}}),a("div",{staticClass:"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9"},[a("v-btn",t._g(t._b({staticStyle:{width:"100%","max-width":"345px"},attrs:{"x-large":"",rounded:"",color:"primary"},on:{click:t.submit}},"v-btn",t.attrs,!1),t.on),[t._v(" 確認送出 ")])],1)],1)],1)},Ba=[],za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"minimap"})},Ra=[],Na=Object(n["b"])({props:{initialLocation:{type:Array,default:[]},pinLocation:{type:Array,default:[]},initialFactories:{type:Array,default:[]}},name:"Minimap",setup(t){var e=Object(n["j"])(null);return Object(n["e"])(()=>{var a=Jt(e.value,t.initialLocation);a.addFactories(t.initialFactories),a.mapInstance.setMinimapPin(...t.pinLocation)}),{minimap:e}}}),Ga=Na,$a=Object(y["a"])(Ga,za,Ra,!1,null,null,null),Ya=$a.exports,Ha=Object(n["b"])({name:"ConfirmFactory",components:{Minimap:Ya},props:{formState:{type:Object,default:{}},previewImages:{type:Array,default:[]},submit:{type:Function}},setup(){var t,e,a=Object(n["d"])(T,Object(n["j"])()),[o,{pageTransition:i}]=Xe(),r=null===(t=a.value)||void 0===t?void 0:t.factories,s=null===(e=a.value)||void 0===e?void 0:e.mapInstance.map.getView().getCenter(),l=[...ct];return{appState:o,initialFactories:r,initialLocation:s,gotoStepOne(){a.value&&(i.gotoCreateStep(0),a.value.mapInstance.setLUILayerVisible(!0))},gotoStepTwo(){i.gotoCreateStep(1)},factoryTypeItems:l}}}),Za=Ha,Ja=(a("c5d3"),a("b974")),qa=a("a844"),Wa=Object(y["a"])(Za,Pa,Ba,!1,null,"5329eab6",null),Ka=Wa.exports;function Xa(t){var e=e=>{"backPressed"===e.state&&t()};window.history.pushState("backPressed","",null),window.history.pushState("dummy","",null),window.addEventListener("popstate",e,{once:!0}),Object(n["f"])(()=>{window.removeEventListener("popstate",e)})}ee()(Wa,{VBtn:oe["a"],VContainer:La["a"],VSelect:Ja["a"],VTextField:Da["a"],VTextarea:qa["a"]});var Qa=Object(n["b"])({name:"CreateFactorySteps",components:{ImageUploadForm:Ua,ConfirmFactory:Ka,SwitchMapModeButton:ce},setup(){var[t,{pageTransition:e,setFactoryLocation:a}]=Xe(),[,{openCreateFactorySuccessModal:o}]=Ye(),[,i]=aa(),{event:r}=Pe(),s=Object(n["j"])(!1),l=Object(n["d"])(T,Object(n["j"])());function d(){l.value&&(l.value.mapInstance.setLUILayerVisible(!1),s.value=!1,e.closeFactoryPage())}var p=()=>{1===t.createStepIndex?d():2===t.createStepIndex?l.value&&(l.value.mapInstance.setLUILayerVisible(!0),e.previousCreateStep()):e.previousCreateStep()};Xa(p);var u=Object(n["i"])({nickname:"",contact:"",others:"",name:"",type:void 0,submitting:!1}),{selectedImages:m,imageUploadState:v,uploadedImages:f,onClickRemoveImage:y,imageUploadFormValid:g}=ja(),b=()=>Object(c["a"])(this,void 0,void 0,(function*(){u.submitting=!0;try{var[a,i]=t.factoryLocation,n={name:u.name,others:u.others,type:u.type,lng:a,lat:i,images:f.value.map(t=>t.token),nickname:u.nickname,contact:u.contact};r("createFactory",{lng:a,lat:i});var s=yield Ae(n);l.value&&l.value.addFactories([s])}catch(c){}finally{u.submitting=!1}e.closeFactoryPage(),o()})),h=Object(n["j"])(!1),_=()=>{h.value=!h.value},x=Object(n["j"])(!1),w=Object(n["j"])(!1),S=()=>{w.value=!w.value},C=Object(n["i"])({longitude:"",latitude:""}),O=()=>{C.longitude="",C.latitude=""},k=()=>{if(l.value){var t=parseFloat(C.longitude),e=parseFloat(C.latitude);if(!C.longitude||!C.latitude||isNaN(t)||isNaN(e))x.value=!1;else{var a=l.value.mapInstance.map.getView().getZoom();(!a||a<=17)&&(a=17),l.value.mapInstance.setCoordinate(t,e,a),x.value=!1}}},F=e=>{for(var a=t.createStepIndex-e,o=0;o<a;o++)p()};return{appState:t,pageTransition:e,formState:u,cancelCreateFactory:d,onBack:p,chooseLocation(){l.value&&(t.canPlaceFactory?(l.value.mapInstance.setLUILayerVisible(!1),a(t.mapLngLat),e.nextCreateStep()):i.showAlert("此地點不在農地範圍內，\n請回報在農地範圍內的工廠。"))},selectedImages:m,imageUploadState:v,uploadedImages:f,onClickRemoveImage:y,imageUploadFormValid:g,discardDialog:s,submitFactory:b,showLongLat:h,toggleShowLongLat:_,chooseLocationDialog:x,inlineLocationForm:w,locationInputState:C,clearLocationInput:O,toggleInlineLocationForm:S,setLocation:k,switchStep:F}}}),to=Qa,eo=(a("38e9"),a("40dc")),ao=a("99d9"),oo=a("169a"),io=a("2fa4"),ro=a("2a7f"),no=Object(y["a"])(to,ka,Fa,!1,null,"ce2a7f04",null),so=no.exports;ee()(no,{VAppBar:eo["a"],VBtn:oe["a"],VCard:ue["a"],VCardText:ao["a"],VCardTitle:ao["b"],VContainer:La["a"],VDialog:oo["a"],VIcon:pa["a"],VSpacer:io["a"],VTextField:Da["a"],VToolbarTitle:ro["a"]});var lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"update-factory-steps"},[a("v-app-bar",{staticClass:"d-block d-md-none",attrs:{fixed:"",color:"white"}},[a("v-spacer"),t.appState.isEditImagesMode?a("v-toolbar-title",{staticClass:"secondary--text"},[t._v("補充照片")]):a("v-toolbar-title",{staticClass:"secondary--text"},[t._v(" "+t._s(t.updateFormAppTitle)+" ")]),a("v-spacer"),a("div",{staticClass:"btn-container"},[a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),o),[a("v-icon",[t._v("mdi-close")])],1)]}}]),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[t.appState.isEditImagesMode?a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("補充照片尚未完成")]),a("v-card-text",[t._v("放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"green darken-1"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續編輯")]),a("a",{staticClass:"d-block mt-4",on:{click:t.cancelUpdateFactoryImages}},[t._v("確定放棄")])],1)],1):a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v(t._s(t.updateFormAppTitle)+"尚未完成！")]),a("v-card-text",[t._v("放棄編輯的話，你將遺失所有未新增的資料。下次需重新填寫。")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續編輯")]),a("a",{staticClass:"d-block mt-4",on:{click:t.cancelUpdateFactory}},[t._v("確定放棄")])],1)],1)],1)],1)],1),t.appState.isEditImagesMode?a("v-app-bar",{staticClass:"d-none d-md-block",attrs:{fixed:"",color:"white"}},[a("v-toolbar-title",{staticClass:"secondary--text"},[t._v("補充照片")]),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"290"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{outlined:""}},"v-btn",i,!1),o),[t._v(" 取消 ")])]}}],null,!1,1770517635),model:{value:t.discardDialog,callback:function(e){t.discardDialog=e},expression:"discardDialog"}},[a("v-card",[a("v-card-title",{staticClass:"secondary--text"},[t._v("補充照片尚未完成")]),a("v-card-text",[t._v("放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片")]),a("v-container",{staticClass:"text-center"},[a("v-btn",{attrs:{width:"100%","x-large":"",rounded:"",color:"primary"},on:{click:function(e){t.discardDialog=!1}}},[t._v("繼續編輯")]),a("a",{staticClass:"d-block mt-4",on:{click:t.cancelUpdateFactoryImages}},[t._v("確定放棄")])],1)],1)],1)],1):t._e(),t.appState.isEditImagesMode?a("image-upload-form",{attrs:{uploading:t.imageUploadState.uploading,error:t.imageUploadState.error,previewImages:t.uploadedImages,onClickRemoveImage:t.onClickRemoveImage,valid:t.imagesValid,submit:t.submitImageUpload,formState:t.imageUploadFormState,submitText:t.imageSubmitting?"照片上傳中...":"確認新增照片",disableProgressiveUpload:""},model:{value:t.selectedImages,callback:function(e){t.selectedImages=e},expression:"selectedImages"}}):t.$vuetify.breakpoint.smAndDown?a("div",{staticClass:"update-factory-comment-container w-100 px-4 py-4 d-flex flex-column justify-between"},[a("div",[a("h3",{staticClass:"mt-4 mb-2 primary--text"},[t._v(t._s(t.updateFormTitle))]),t.appState.isEditComment?a("v-textarea",{attrs:{outlined:"",solo:"",placeholder:"例：常常散發異味"},model:{value:t.formState.others,callback:function(e){t.$set(t.formState,"others",e)},expression:"formState.others"}}):t._e(),t.appState.isEditName?a("v-text-field",{attrs:{outlined:"",placeholder:"例：小明化工廠",color:"primary"},model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}}):t._e(),t.appState.isEditType?a("v-select",{attrs:{items:t.factoryTypeItems,solo:"",outlined:"",placeholder:"未選擇"},model:{value:t.formState.factory_type,callback:function(e){t.$set(t.formState,"factory_type",e)},expression:"formState.factory_type"}}):t._e()],1),a("v-btn",{staticClass:"w-100 primary",staticStyle:{width:"100%","max-width":"345px",margin:"0 auto"},attrs:{"x-large":"",rounded:"",disabled:!t.isCurrentFieldValid},on:{click:t.submitUpdateFactory}},[t._v(" "+t._s(t.updateFormButton)+" ")])],1):t._e(),t.$vuetify.breakpoint.mdAndUp?a("v-dialog",{attrs:{persistent:"","max-width":"395"},model:{value:t.appState.isEditFactoryMode,callback:function(e){t.$set(t.appState,"isEditFactoryMode",e)},expression:"appState.isEditFactoryMode"}},[a("div",{staticClass:"update-factory-comment-modal w-100 px-4 py-4 d-flex flex-column justify-between"},[a("div",{staticClass:"d-flex justify-end"},[a("v-btn",{attrs:{icon:""},on:{click:t.cancelUpdateFactory}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("div",[a("h3",{staticClass:"mb-3"},[t._v(t._s(t.updateFormTitle))]),t.appState.isEditComment?a("v-textarea",{attrs:{outlined:"",solo:"",placeholder:"例：常常散發異味"},model:{value:t.formState.others,callback:function(e){t.$set(t.formState,"others",e)},expression:"formState.others"}}):t._e(),t.appState.isEditName?a("v-text-field",{attrs:{outlined:"",placeholder:"例：小明化工廠",color:"primary"},model:{value:t.formState.name,callback:function(e){t.$set(t.formState,"name",e)},expression:"formState.name"}}):t._e(),t.appState.isEditType?a("v-select",{attrs:{items:t.factoryTypeItems,solo:"",outlined:"",placeholder:"未選擇"},model:{value:t.formState.factory_type,callback:function(e){t.$set(t.formState,"factory_type",e)},expression:"formState.factory_type"}}):t._e()],1),a("v-btn",{staticClass:"w-100",staticStyle:{width:"100%","max-width":"345px",margin:"0 auto"},attrs:{"x-large":"",rounded:"",disabled:!t.isCurrentFieldValid,color:"primary"},on:{click:t.submitUpdateFactory}},[t._v(" "+t._s(t.updateFormButton)+" ")])],1)]):t._e()],1)},co=[],po=Object(n["b"])({name:"UpdateFactorySteps",components:{ImageUploadForm:Ua},setup(){var t,e,[a,{pageTransition:o}]=Xe(),[,i]=Ye(),r=Object(n["d"])(T,Object(n["j"])()),{event:s}=Pe(),{selectedImages:l,imageUploadState:d,uploadedImages:p,onClickRemoveImage:u,imageUploadFormValid:m}=Ia(),v=Object(n["i"])({nickname:"",contact:""}),f=Object(n["j"])(!1),y=Object(n["a"])(()=>m.value&&!f.value),g=()=>Object(c["a"])(this,void 0,void 0,(function*(){var t,e;if((null===(t=a.factoryData)||void 0===t?void 0:t.id)&&l.value){f.value=!0;try{var n=yield Me(null===(e=a.factoryData)||void 0===e?void 0:e.id,l.value,{nickname:v.nickname,contact:v.contact});if(r.value){var s=a.factoryData;s.images=s.images.concat(n),r.value.updateFactory(s.id,s),a.factoryData=s}o.cancelUpdateFactoryImages(),i.openUpdateFactoryImagesSuccessModal()}catch(c){console.error(c)}f.value=!1}})),b=Object(n["j"])(!1),h=()=>{b.value=!1,o.cancelUpdateFactoryImages()},_=()=>{b.value=!1,o.cancelUpdateFactoryComment()},x=Object(n["i"])({others:"",name:null===(t=a.factoryData)||void 0===t?void 0:t.name,factory_type:null===(e=a.factoryData)||void 0===e?void 0:e.type,submitting:!1}),w=[...ct],S={others:Object(n["a"])(()=>x.others.length>0&&!x.submitting),name:Object(n["a"])(()=>{var t,e;return(null===(t=null===x||void 0===x?void 0:x.name)||void 0===t?void 0:t.length)&&(null===(e=x.name)||void 0===e?void 0:e.length)>0&&!x.submitting}),factory_type:Object(n["a"])(()=>!!x.factory_type&&!x.submitting)},C=Object(n["a"])(()=>{var t=a.updateFactoryField;return S[t].value}),O=Object(n["a"])(()=>{return a.isEditComment?"補充工廠描述":a.isEditName?"更改外部文字":"更改工廠類型"}),k=Object(n["a"])(()=>{return a.isEditComment?"工廠描述":a.isEditName?"工廠外部文字":a.isEditType?"工廠類型":void 0}),F=Object(n["a"])(()=>{return a.isEditComment?"新增工廠描述":a.isEditName?"確認更改工廠外部文字":a.isEditType?"確認更改工廠類型":void 0}),j=()=>Object(c["a"])(this,void 0,void 0,(function*(){var t,e;if((null===(t=a.factoryData)||void 0===t?void 0:t.id)&&C.value){x.submitting=!0;try{var n=a.updateFactoryField;s("updateFactory",{field:n});var l=yield Ee(null===(e=a.factoryData)||void 0===e?void 0:e.id,{[n]:x[n]});r.value&&(r.value.updateFactory(l.id,l),a.factoryData=l),o.cancelUpdateFactoryComment(),i.openUpdateFactorySuccessModal()}catch(c){}x.submitting=!1}}));return{appState:a,pageTransition:o,discardDialog:b,imageUploadFormState:v,selectedImages:l,imageUploadState:d,uploadedImages:p,onClickRemoveImage:u,imagesValid:y,submitImageUpload:g,cancelUpdateFactoryImages:h,cancelUpdateFactory:_,updateFormAppTitle:O,updateFormTitle:k,updateFormButton:F,formState:x,isCurrentFieldValid:C,factoryTypeItems:w,submitUpdateFactory:j,imageSubmitting:f}}}),uo=po,mo=(a("dc8c"),Object(y["a"])(uo,lo,co,!1,null,"007ea2fd",null)),vo=mo.exports;ee()(mo,{VAppBar:eo["a"],VBtn:oe["a"],VCard:ue["a"],VCardText:ao["a"],VCardTitle:ao["b"],VContainer:La["a"],VDialog:oo["a"],VIcon:pa["a"],VSelect:Ja["a"],VSpacer:io["a"],VTextField:Da["a"],VTextarea:qa["a"],VToolbarTitle:ro["a"]});var fo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.appState.formPageOpen,expression:"!appState.formPageOpen"}],staticClass:"factory-container",class:{full:t.full,desktop:t.$vuetify.breakpoint.mdAndUp,empty:!t.appState.factoryData},attrs:{elevation:"3"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.appState.factoryData,expression:"appState.factoryData"}],ref:"factoryDetailScrollerRef",staticClass:"factory-detail-scroller"},[t.scrollOff?a("v-app-bar",{staticClass:"d-block d-md-none",attrs:{fixed:"",color:"white"}},[a("v-spacer"),a("v-toolbar-title",[a("v-icon",{staticStyle:{"margin-bottom":"5px"},attrs:{color:t.statusColor}},[t._v("mdi-map-marker")]),t._v(t._s(t.factoryStatusText)+" ")],1),a("v-spacer"),a("div",{staticClass:"btn-container"},[a("v-icon",{staticClass:"float-right",on:{click:t.collapseFactoryDetail}},[t._v("mdi-close")]),a("v-icon",{staticClass:"float-right mr-4",on:{click:t.copyToClipboard}},[t._v("mdi-share-variant")])],1),t.showCopiedMessage?a("div",{staticClass:"copied-message flex justify-center align-items-center"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"white"}},[t._v("mdi-content-copy")]),t._v(" 已複製連結 ")],1):t._e()],1):t._e(),a("v-card-text",[a("div",{staticClass:"d-flex justify-between align-items-center mb-3"},[a("span",{staticClass:"factory-status-title"},[t._v("工廠狀態")]),t.$vuetify.breakpoint.mdAndUp?a("v-btn",{attrs:{rounded:"",outlined:t.showCopiedMessage,color:t.showCopiedMessage?null:"white"},on:{click:t.copyToClipboard}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-share-variant")]),t._v(" "+t._s(t.showCopiedMessage?"已複製連結":"分享工廠")+" ")],1):a("span",[a("v-icon",{staticClass:"mr-4",on:{click:t.copyToClipboard}},[t._v("mdi-share-variant")]),a("v-icon",{on:{click:t.collapseFactoryDetail}},[t._v("mdi-close")])],1)],1),a("p",{staticClass:"factory-status secondary--text mb-2",staticStyle:{clear:"both"}},[a("v-icon",{staticStyle:{"margin-bottom":"5px"},attrs:{color:t.statusColor}},[t._v("mdi-map-marker")]),t._v(t._s(t.factoryStatusText)+" ")],1),a("p",{staticClass:"caption mb-0",staticStyle:{color:"#A1A1A1"}},[t._v(" 工廠編號 "+t._s(t.factoryId)+" "),a("br"),t._v(" "+t._s(t.lastUpdatedAt)+" ")]),t.showCopiedMessage&&!t.scrollOff?a("div",{staticClass:"copied-message flex justify-center align-items-center"},[a("v-icon",{staticClass:"mr-1",attrs:{color:"white"}},[t._v("mdi-content-copy")]),t._v(" 已複製連結 ")],1):t._e()]),a("v-slide-group",{ref:"slideGroup",attrs:{"show-arrows":t.images>0&&"desktop"}},[a("v-slide-item",[a("div",{staticClass:"update-image-button d-flex flex-column justify-center align-items-center",on:{click:t.pageTransition.startUpdateFactoryImages}},[a("v-icon",{staticClass:"mb-1",attrs:{color:"white"}},[t._v("mdi-camera-plus")]),t._v(" 補充照片 ")],1)]),t._l(t.images,(function(e,o){return a("v-slide-item",{key:e.id,staticClass:"mr-4",class:{"ml-4":0===o},nativeOn:{click:function(e){return t.setLightboxIndex(o)}}},[a("ImgurFallbackImage",{attrs:{src:e.url,className:"factory-slide-image"}})],1)}))],2),a("div",{staticClass:"mt-4 mx-3 mb-2"},[a("h3",{staticClass:"mb-1"},[t._v("地段 / 地址")]),a("p",{staticClass:"mb-5"},[t._v(t._s(t.factoryAddressAndLandcode))]),t.full||t.$vuetify.breakpoint.mdAndUp?a("div",{staticClass:"mb-5"},[a("h3",{staticClass:"mb-1"},[t._v("經緯度")]),a("p",{staticClass:"mb-1"},[t._v(t._s(t.longitude)+", "+t._s(t.latitude))]),a("p",{staticClass:"text-caption"},[t._v("以上經緯度版本為 WGS84")])]):t._e(),t.source?[a("h3",{staticClass:"mb-1"},[t._v("資料來源")]),a("p",{staticClass:"mb-5"},[t._v(t._s(t.source))])]:t._e(),t.full||t.$vuetify.breakpoint.mdAndUp?a("hr"):t._e(),t.full||t.$vuetify.breakpoint.mdAndUp?t._e():a("v-btn",{staticClass:"m-0 mb-0 px-0 v-btn-plain",attrs:{text:"",depressed:"",elevation:"0",ripple:!1,color:"#697F01"},on:{click:t.expandFactoryDetail}},[t._v(" 顯示更多資訊 "),a("v-icon",[t._v("mdi-menu-down")])],1),t.full||t.$vuetify.breakpoint.mdAndUp?a("div",{staticClass:"mt-4"},[a("h2",{staticClass:"mb-5"},[t._v("其他工廠資訊")]),a("h3",{staticClass:"mb-1"},[t._v("工廠外部文字")]),t.factoryName?a("p",{staticClass:"mb-3"},[t._v(t._s(t.factoryName))]):t._e(),a("v-btn",{staticClass:"d-block mb-5",attrs:{outlined:""},on:{click:function(e){return t.startUpdateFactoryCommentFor("name")}}},[t._v(" "+t._s(t.factoryName?"更改外部文字":"回報外部文字")+" ")]),a("h3",{staticClass:"mb-1"},[t._v("工廠類型")]),t.factoryType?a("p",{staticClass:"mb-3"},[t._v(t._s(t.factoryType))]):t._e(),a("v-btn",{staticClass:"d-block mb-5",attrs:{outlined:""},on:{click:function(e){return t.startUpdateFactoryCommentFor("factory_type")}}},[t._v(" "+t._s(t.factoryType?"更改工廠類型":"回報工廠類型")+" ")]),a("h3",{staticClass:"mb-1"},[t._v("工廠描述")]),a("v-btn",{staticClass:"mb-2",attrs:{outlined:""},on:{click:function(e){return t.startUpdateFactoryCommentFor("others")}}},[t._v("補充工廠描述")]),t._l(t.pastDescriptions,(function(e,o){return a("div",{key:o,staticClass:"mt-2",staticStyle:{"font-size":"14px"}},[a("p",{staticClass:"color-gray-light mb-1"},[t._v(t._s(e.date))]),a("p",{staticStyle:{"line-height":"24px"}},[t._v(t._s(e.others))])])})),t.factoryFollowups.length>0?[a("h3",{staticClass:"mb-1"},[t._v("政府回應")]),t._l(t.factoryFollowups,(function(e,o){return a("div",{key:o,staticClass:"mt-2",staticStyle:{"font-size":"14px"}},[a("p",{staticStyle:{"line-height":"24px"}},[t._v(t._s(e.note))])])}))]:t._e()],2):t._e()],2)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.appState.factoryData,expression:"!appState.factoryData"}],staticClass:"factory-detail-scroller px-4 py-5"},[a("h1",{staticClass:"secondary--text mb-5"},[t._v("請選擇一個地標")]),a("p",[t._v("請選擇一間工廠查看工廠詳細資訊。")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mdAndUp,expression:"$vuetify.breakpoint.mdAndUp"}],staticClass:"sidebar-collapse-button d-flex align-items-center justify-center",on:{click:t.toggleFactoryDetail}},[a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-menu-left")])],1)]),a("CoolLightBox",{attrs:{items:t.lightboxItems,index:t.lightboxIndex},on:{close:function(){return t.setLightboxIndex(null)}}})],1)},yo=[],go=(a("4e827"),a("f904")),bo=a.n(go),ho=ct.reduce((t,e)=>{return Object.assign(Object.assign({},t),{[e.value]:e.text})},{}),_o=t=>{return t.type?ho[t.type]:null},xo=t=>{var e=Object(n["j"])(0),a=Object(n["j"])(0),o=()=>{if(t.value){var o=t.value;e.value=o.scrollTop,a.value=o.scrollLeft}};return Object(n["k"])(t,t=>{t&&(e.value=t.scrollTop,a.value=t.scrollLeft,t.addEventListener("scroll",o))}),Object(n["f"])(()=>{t.value&&t.value.removeEventListener("scroll",o)}),{scrollTop:e,scrollLeft:a}},wo=xo,So=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{class:t.className,attrs:{src:t.imageUrl,alt:t.alt},on:{error:t.onError}})},Co=[],Oo=/i\.imgur\.com\/([a-zA-Z0-9]+)\.([a-zA-Z0-9]+)(\?.*)?$/,ko="https://api.disfactory.tw/imgur",Fo=Object(n["b"])({name:"ImgurFallbackImage",props:{src:{type:String,required:!0},alt:{type:String,default:""},className:{type:String,default:""}},setup(t,e){var a=Oo.exec(t.src),o=Object(n["a"])(()=>{return a?{id:a[1],ext:a[2]}:null}),i=Object(n["a"])(()=>{return o.value?"".concat(ko,"/").concat(o.value.id,".").concat(o.value.ext):t.src}),r=Object(n["j"])(i.value),s=()=>{r.value=t.src};return{imageUrl:r,onError:s}}}),jo=Fo,Io=Object(y["a"])(jo,So,Co,!1,null,null,null),Mo=Io.exports,Ao=Object(n["b"])({name:"FactoryDetailPage",components:{ImgurFallbackImage:Mo},setup(){var t,[e,{pageTransition:a,expandFactoryDetail:o,collapseFactoryDetail:i,toggleFactoryDetail:r}]=Xe(),s=Object(n["a"])(()=>{return e.factoryData?e.factoryData.images:[]}),l=Object(n["a"])(()=>{return e.factoryData?e.factoryData.images.map(t=>({title:"",description:"",src:t.url})):[]}),d=Object(n["j"])(null),p=t=>{d.value=t},u=Object(n["a"])(()=>{return e.factoryData?Dt(e.factoryData):void 0}),m=Object(n["a"])(()=>{return e.factoryData?e.factoryData.follow_ups_for_user:[]}),v=Object(n["a"])(()=>{if("undefined"!==typeof u.value){var t=mt(u.value),{document_display_status:a}=e.factoryData||{};return a?"".concat(t,"：").concat(a):t}return""}),f=Object(n["a"])(()=>{return"undefined"!==typeof u.value?Lt(u.value):null}),y=Object(n["a"])(()=>{return e.factoryData?e.factoryData.display_number:""}),g=Object(n["a"])(()=>{return e.factoryData?_o(e.factoryData):null}),b=Object(n["a"])(()=>{var t;return(null===(t=e.factoryData)||void 0===t?void 0:t.name)||""}),h=Object(n["a"])(()=>{if(e.factoryData){var{townname:t,sectname:a,sectcode:o,landcode:i}=e.factoryData;return t&&a&&o&&i?"".concat(t," ").concat(a," (").concat(o,") ").concat(i,"地號"):"擷取中"}return""}),_=Object(n["a"])(()=>{var t;return e.factoryData?null===(t=e.factoryData.source)||void 0===t?void 0:t.split("").map((function(t){switch(t){case"U":return"本系統";case"G":return"農委會";case"E":return"經濟部"}})).join("、"):""}),x=Object(n["a"])(()=>e.factoryDetailsExpanded),w=Object(n["a"])(()=>{var t;return null===(t=e.factoryData)||void 0===t?void 0:t.lng.toFixed(7)}),S=Object(n["a"])(()=>{var t;return null===(t=e.factoryData)||void 0===t?void 0:t.lat.toFixed(7)}),C=Object(n["j"])(null),{scrollTop:O}=wo(C),k=Object(n["a"])(()=>O.value>29&&x.value),F=Object(n["j"])(!1),j=()=>{var t,a;if(e.factoryData){var{host:o,protocol:i}=window.location,r="".concat(i,"//").concat(o,"/#map=16/").concat(null===(t=e.factoryData)||void 0===t?void 0:t.lng,"/").concat(null===(a=e.factoryData)||void 0===a?void 0:a.lat,"&factoryId=").concat(e.factoryData.id);bo()(r),F.value=!0,window.setTimeout(()=>{F.value=!1},1e3)}},I=Object(n["j"])(null);Object(n["g"])(()=>{var e;if(JSON.stringify(s.value)!==JSON.stringify(t))if(t){if(t=s.value.slice(),I.value){var a=null===(e=I.value)||void 0===e?void 0:e.$refs.content;window.setTimeout(()=>{a.style="translateX(0px)"},50)}}else t=s.value.slice()});var M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";a.startUpdateFactoryComment(t)},A=Object(n["j"])([]);Object(n["k"])(()=>e.factoryData,(function(){e.factoryData&&(()=>Object(c["a"])(this,void 0,void 0,(function*(){var t;A.value=((yield Te(null===(t=e.factoryData)||void 0===t?void 0:t.id))||[]).sort((t,e)=>{return new Date(e.created_at)>=new Date(t.created_at)?1:-1})})))()}));var E=Object(n["a"])(()=>{return A.value.map(t=>{var e=new Date(t.created_at),a="".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate());return{date:a,others:t.others}}).filter(t=>t.others)}),T=Object(n["a"])(()=>{if(!e.factoryData||!e.factoryData.reported_at)return null;var t;t=0===A.value.length?new Date(e.factoryData.reported_at):new Date(A.value[0].created_at);var a="".concat(t.getFullYear(),"/").concat(t.getMonth()+1,"/").concat(t.getDate());return"最後更新 ".concat(a)});return{full:x,appState:e,pageTransition:a,images:s,expandFactoryDetail:o,collapseFactoryDetail:i,toggleFactoryDetail:r,factoryStatus:u,factoryStatusText:v,statusColor:f,factoryId:y,factoryType:g,factoryName:b,factoryAddressAndLandcode:h,factoryFollowups:m,source:_,pastDescriptions:E,lastUpdatedAt:T,longitude:w,latitude:S,factoryDetailScrollerRef:C,scrollOff:k,showCopiedMessage:F,copyToClipboard:j,slideGroup:I,startUpdateFactoryCommentFor:M,lightboxItems:l,lightboxIndex:d,setLightboxIndex:p}}}),Eo=Ao,To=(a("7082"),a("7efd")),Lo=a("9dbe"),Do=Object(y["a"])(Eo,fo,yo,!1,null,"be2d9c9e",null),Vo=Do.exports;ee()(Do,{VAppBar:eo["a"],VBtn:oe["a"],VCard:ue["a"],VCardText:ao["a"],VIcon:pa["a"],VSlideGroup:To["a"],VSlideItem:Lo["a"],VSpacer:io["a"],VToolbarTitle:ro["a"]});var Uo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about-dialog-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("h3",[t._v("關於回報系統")]),a("p",[t._v(" 農地違章工廠舉報系統為協助民眾回報揭露農地違章工廠資訊，並非實際完成舉報。 ")]),a("p",[t._v(" 地球公民基金會將整理資料進行部分案件追蹤，完成舉報者可於「已舉報」案件查見。 ")]),a("p",[t._v(" 105.05.20 前的違章工廠我們將持續收集資訊，但本系統優先針對新增建與中高污染違章工廠進行舉報。 ")]),a("p",[t._v(" 本系統感謝 g0v.tw 社群朋友共同開發。 ")]),a("p",[t._v(" 既有疑似違章工廠資料來源為 2019 年 7 月 30 日取自內政部國土測繪圖資雲"),a("a",{attrs:{href:"https://maps.nlsc.gov.tw/"}},[t._v("網站")]),t._v("。 ")]),a("p",[t._v(" 全站使用者貢獻資料以 "),a("a",{attrs:{href:"https://creativecommons.org/licenses/by/3.0/tw/"}},[t._v("CC BY 姓名標示 3.0")]),t._v(" 釋出，標註「© 農地違章工廠舉報小幫手貢獻者」，原始碼以 MIT 開放授權公開在 "),a("a",{attrs:{href:"https://github.com/Disfactory/Disfactory"}},[t._v("GitHub")]),t._v(" 上 ")])])])],1)},Po=[],Bo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-modal-component",class:{open:t.open}},[a("div",{staticClass:"app-modal-backdrop",attrs:{"data-label":"modal-backdrop"},on:{click:t.dismiss}}),a("div",{staticClass:"app-modal"},[t.showCloseButton?a("div",{staticClass:"close",attrs:{"data-label":"modal-close","data-testid":"modal-close"},on:{click:t.dismiss}}):t._e(),t._t("default")],2)])},zo=[],Ro=Object(n["b"])({name:"AppModal",props:{open:{type:Boolean,default:!1},dismiss:{type:Function},showCloseButton:{type:Boolean,default:!0}}}),No=Ro,Go=(a("f0da"),Object(y["a"])(No,Bo,zo,!1,null,"4f1e1974",null)),$o=Go.exports,Yo=Object(n["b"])({name:"AboutModal",components:{AppModal:$o},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Ho=Yo,Zo=(a("9769d"),Object(y["a"])(Ho,Uo,Po,!1,null,null,null)),Jo=Zo.exports,qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-modal-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("img",{attrs:{width:"137",src:"/images/cet-logo.png",alt:"Citizen of the Earth Taiwan"}}),a("h3",[t._v(" 有任何回報相關問題"),a("br"),t._v(" 歡迎聯絡 ")]),a("p",[t._v(" 地球公民基金會"),a("br"),t._v(" TEL: 02-23920371"),a("br"),t._v(" Email: "),a("a",{attrs:{href:"mailto:cet@cet-taiwan.org"}},[t._v("cet@cet-taiwan.org")]),a("br")])])])],1)},Wo=[],Ko=Object(n["b"])({name:"ContactModal",components:{AppModal:$o},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Xo=Ko,Qo=(a("f3e5"),Object(y["a"])(Xo,qo,Wo,!1,null,null,null)),ti=Qo.exports,ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"getting-started-container"},[a("app-modal",{attrs:{open:t.open,showCloseButton:!1,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("h3",{staticClass:"text-center"},[t._v("歡迎來到"),a("b",[t._v("農地違章工廠回報系統！")])]),a("br"),a("br"),a("p",[t._v("需要大家回報以下工廠之照片及資訊：")]),a("p",[a("ul",[a("li",[t._v("2016.05.20後新增的農地違章工廠")]),a("li",[t._v("中高污染工廠")])])]),a("p",[t._v("以上資訊將由"),a("b",[t._v("地球公民基金會")]),t._v("彙整後，向政府舉報並追蹤拆除進度。")]),a("small",{staticClass:"text-center",staticStyle:{"padding-left":"20px","padding-right":"20px"}},[t._v(" 行動前請同意資料貢獻"),a("a",{attrs:{href:"https://license.disfactory.tw/#%E8%BE%B2%E5%9C%B0%E9%81%95%E7%AB%A0%E5%B7%A5%E5%BB%A0%E5%9B%9E%E5%A0%B1%E7%B3%BB%E7%B5%B1%EF%BC%88disfactory%EF%BC%89%E8%B2%A2%E7%8D%BB%E5%8D%94%E8%AD%B0",target:"_blank"}},[t._v("授權條款")]),t._v("與"),a("a",{attrs:{href:"https://license.disfactory.tw/#%E9%9A%B1%E7%A7%81%E6%AC%8A%E6%A2%9D%E6%AC%BE",target:"_blank"}},[t._v("隱私條款")]),t._v("。本網站由"),a("a",{attrs:{href:"https://www.cet-taiwan.org/",target:"_blank"}},[t._v("地球公民基金會")]),t._v("與 "),a("a",{attrs:{href:"https://g0v.tw/",target:"_blank"}},[t._v("g0v.tw")]),t._v(" 社群共同開發。 ")]),a("app-button",{on:{click:t.agree}},[t._v("我同意加入回報")]),a("small",[a("a",{attrs:{href:"https://about.disfactory.tw"}},[t._v("我不同意，請帶我離開這個頁面")])])],1)])],1)},ai=[],oi=Object(n["b"])({name:"GettingStartedModal",components:{AppModal:$o,AppButton:b},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}},setup(t){return{agree(){localStorage.setItem("use-app","true"),t.dismiss&&t.dismiss()}}}}),ii=oi,ri=(a("d1c5"),Object(y["a"])(ii,ei,ai,!1,null,null,null)),ni=ri.exports,si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tutorial-modal-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.onDismissClick}},[t.isAdd||t.isUpdate?a("div",{staticClass:"back-button",attrs:{"data-testid":"back-button"},on:{click:t.openHome}},[a("span"),a("span"),a("span")]):t._e(),a("div",{staticClass:"page"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isHome,expression:"isHome"}],attrs:{id:"tutorial-home"}},[a("h2",[t._v("使用說明")]),a("p",[t._v(" 如果系統無法讀取你的位置， 請至手機系統設定開啟位置權限。 ")]),a("div",{staticClass:"outline-button",on:{click:t.openAdd}},[t._v("如何新增一筆"),a("br"),t._v("違章工廠的資料？")]),a("div",{staticClass:"outline-button",on:{click:t.openUpdate}},[t._v("如何在一筆資料裡"),a("br"),t._v("補充更多資訊？")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"isAdd"}],attrs:{id:"tutorial-add-factory"}},[a("carousel",{ref:"createCarousel",attrs:{"per-page":1,paginationActiveColor:"#6E8501",paginationColor:"#e3e3e3",paginationPadding:5}},t._l(t.addImages,(function(e,o){return a("slide",{key:e},[a("h2",[t._v("新增違章工廠("+t._s(o+1)+"/7)")]),a("img",{attrs:{src:e}})])})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isUpdate,expression:"isUpdate"}],attrs:{id:"tutorial-update-factory"}},[a("carousel",{ref:"updateCarousel",attrs:{"per-page":1,paginationActiveColor:"#6E8501",paginationColor:"#e3e3e3",paginationPadding:5}},t._l(t.updateImages,(function(e,o){return a("slide",{key:e},[a("h2",[t._v("補充工廠資訊("+t._s(o+1)+"/4)")]),a("img",{attrs:{src:e}})])})),1)],1)])])],1)},li=[],ci=a("0a63"),di=Object(n["b"])({name:"TutorialModal",components:{AppModal:$o,Carousel:ci["Carousel"],Slide:ci["Slide"]},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}},setup(t){var e=Object(n["j"])("home"),a=Object(n["a"])(()=>"home"===e.value),o=Object(n["a"])(()=>"add"===e.value),i=Object(n["a"])(()=>"update"===e.value),r=Object(n["j"])(null),s=Object(n["j"])(null),l=()=>{e.value="home"},c=()=>{r.value.goToPage(0),e.value="add"},d=()=>{s.value.goToPage(0),e.value="update"},p=new Array(7).fill(!0).map((t,e)=>"/images/tutorial/create-".concat(e+1,".jpg")),u=new Array(4).fill(!0).map((t,e)=>"/images/tutorial/update-".concat(e+1,".jpg")),m=()=>{l(),t.dismiss()};return{isHome:a,isAdd:o,isUpdate:i,openHome:l,openAdd:c,openUpdate:d,addImages:p,updateImages:u,onDismissClick:m,createCarousel:r,updateCarousel:s}}}),pi=di,ui=(a("1bed"),Object(y["a"])(pi,si,li,!1,null,null,null)),mi=ui.exports,vi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",t._b({attrs:{"max-width":"350"},model:{value:t.safetyModalState,callback:function(e){t.safetyModalState=e},expression:"safetyModalState"}},"v-dialog",t.$attrs,!1),[a("div",{staticClass:"safety-modal"},[a("v-carousel",{attrs:{"progress-color":"#6E8501",light:"","hide-delimiter-background":"",progress:!1}},[a("v-card",[a("v-carousel-item",{staticClass:"page pa-3"},[a("h1",{staticClass:"mt-3 pb-1 mb-4"},[t._v("安全須知")]),a("p",[t._v(" 請參考以下建議，前往違章工廠拍照蒐證 ")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/1.png",alt:""}}),a("h2",[t._v(" 場勘 ")]),a("p",[t._v(" 假裝路過，檢查有無監視器；尋找適合拍照的隱蔽處 ")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/2.png",alt:""}}),a("h2",[t._v("藏身")]),a("p",[t._v(" 盡量避開監視器、他人視線；盡量在隱蔽處拍照（例如：車上、民宅內、樹叢間、遠方） ")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/3.png",alt:""}}),a("h2",[t._v("避嫌")]),a("p",[t._v("假如地點不夠隱密，請用手機拍照，降低他人戒心")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/4.png",alt:""}}),a("h2",[t._v("速離")]),a("p",[t._v("拍到1張清晰照片即可離去")])]),a("v-carousel-item",{staticClass:"page pa-3"},[a("img",{attrs:{src:"/images/safety_notice/5.png",alt:""}}),a("h2",[t._v("應變")]),a("p",[t._v("假如有人上前問話，請表現得「充滿好奇心」，試著跟對方聊天（例如：好奇水電師傅的施工技術），再伺機離開。")])])],1)],1)],1)])},fi=[],yi=Object(n["b"])({name:"SafetyModal",props:{value:{required:!0,type:Boolean}},setup(t,e){var a=Object(n["a"])({get:()=>t.value,set:t=>e.emit("input",t)});return{safetyModalState:a}}}),gi=yi,bi=(a("0751"),a("5e66")),hi=a("3e35"),_i=Object(y["a"])(gi,vi,fi,!1,null,null,null),xi=_i.exports;ee()(_i,{VCard:ue["a"],VCarousel:bi["a"],VCarouselItem:hi["a"],VDialog:oo["a"]});var wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss,showCloseButton:!1}},[a("h3",[t._v("感謝您新增資訊！")]),a("app-button",{attrs:{"data-label":"create-factory-success-close"},on:{click:t.dismiss}},[t._v("確認")])],1)},Si=[],Ci=Object(n["b"])({name:"CreateFactorySuccessModal",components:{AppModal:$o,AppButton:b},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Oi=Ci,ki=(a("b4fe"),Object(y["a"])(Oi,wi,Si,!1,null,"f1cd472e",null)),Fi=ki.exports,ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss,showCloseButton:!1}},[a("h3",[t._v("感謝您補充資訊！")]),a("app-button",{attrs:{"data-label":"update-factory-success-apply"},on:{click:t.dismiss}},[t._v("確認")])],1)},Ii=[],Mi=Object(n["b"])({name:"UpdateFactorySuccessModal",components:{AppModal:$o,AppButton:b},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Ai=Mi,Ei=(a("979a"),Object(y["a"])(Ai,ji,Ii,!1,null,"72bdbd76",null)),Ti=Ei.exports,Li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ios-version-modal-container"},[a("app-modal",{attrs:{open:t.open,dismiss:t.dismiss}},[a("div",{staticClass:"page"},[a("h3",[t._v("⚠️你的手機無法新增可疑工廠")]),a("p",[t._v(" 很抱歉，你的 iPhone iOS 操作系統無法成功在本網站上傳照片。"),a("br"),t._v(" 請改用電腦新增可疑工廠照片或是至「系統設定」升級 iOS操作系統版本到至少 13.4 以上。瀏覽地圖功能則不受影響。 ")]),a("app-button",{on:{click:t.dismiss}},[t._v("知道了")])],1)])],1)},Di=[],Vi=Object(n["b"])({name:"IosVersionModal",components:{AppModal:$o,AppButton:b},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Ui=Vi,Pi=(a("0b63"),Object(y["a"])(Ui,Li,Di,!1,null,null,null)),Bi=Pi.exports,zi=Object(n["b"])({name:"App",components:{Map:ma,AppAlert:Oa,AppButton:b,AppNavbar:C,AppSidebar:ha,AboutModal:Jo,ContactModal:ti,GettingStartedModal:ni,SafetyModal:xi,CreateFactorySuccessModal:Fi,UpdateFactorySuccessModal:Ti,TutorialModal:mi,IosVersionModal:Bi,CreateFactorySteps:so,UpdateFactorySteps:vo,FactoryDetailPage:Vo},setup(t,e){Ue(e),$e(),We(),ta(),Wt();var[a,o]=Ye(),[i,r]=Xe(),[s,l]=aa();Object(n["h"])(T,Object(n["j"])(null));var c=Object(n["j"])(!1);return{appState:i,alertState:s,alertActions:l,appActions:r,modalState:a,modalActions:o,drawer:c}}}),Ri=zi,Ni=(a("5c0b"),a("7496")),Gi=a("5bc1"),$i=a("1baa"),Yi=a("f6c4"),Hi=a("f774"),Zi=Object(y["a"])(Ri,i,r,!1,null,null,null),Ji=Zi.exports;ee()(Zi,{VApp:Ni["a"],VAppBar:eo["a"],VAppBarNavIcon:Gi["a"],VBtn:oe["a"],VCard:ue["a"],VCardText:ao["a"],VCardTitle:ao["b"],VDialog:oo["a"],VIcon:pa["a"],VList:ie["a"],VListItem:re["a"],VListItemGroup:$i["a"],VListItemTitle:ne["b"],VMain:Yi["a"],VNavigationDrawer:Hi["a"],VSpacer:io["a"],VToolbarTitle:ro["a"]});var qi=a("5547"),Wi=a("9483");Object(Wi["a"])("".concat("/","service-worker.js"),{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var Ki=a("2bdd"),Xi=a.n(Ki),Qi=a("f309"),tr=a("fcf4");o["a"].use(Qi["a"]);var er=new Qi["a"]({theme:{themes:{light:{primary:"#697F01",secondary:"#364516",accent:tr["a"].green.base}}}});a("2223");o["a"].config.productionTip=!1,o["a"].use(n["c"]),o["a"].use(qi["a"]),o["a"].use(Xi.a,{config:{id:"UA-154739393-1"},enabled:!0}),new o["a"]({vuetify:er,render:t=>t(Ji)}).$mount("#app")},d10d:function(t,e,a){},d1c5:function(t,e,a){"use strict";var o=a("8271"),i=a.n(o);i.a},d3a7:function(t,e,a){},dafd:function(t,e,a){"use strict";var o=a("c276"),i=a.n(o);i.a},dc8c:function(t,e,a){"use strict";var o=a("42d1"),i=a.n(o);i.a},e405:function(t,e,a){"use strict";var o=a("d3a7"),i=a.n(o);i.a},e556:function(t,e,a){},f0da:function(t,e,a){"use strict";var o=a("f272"),i=a.n(o);i.a},f1cf:function(t,e,a){},f272:function(t,e,a){},f3de:function(t,e,a){},f3e5:function(t,e,a){"use strict";var o=a("31aa"),i=a.n(o);i.a}});
//# sourceMappingURL=app.fc07b636.js.map